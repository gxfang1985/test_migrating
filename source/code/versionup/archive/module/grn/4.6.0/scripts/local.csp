<?php
require_once('grn/application.csp');
require_once('grn/file.csp');

use grn\versionup\v7_8_1100\Updater as v7_8_1100_Updater;

function grn460_local_main()
{
    cb_export_log('Started grn460_local_main. ', false);

    /****************************************
     *  update the version number of profile data
     ****************************************/
    $version = '4.6.0';
    require_once('fw/profile.csp');
    $profile = cb_get_system_profile('grn.common.system');
    $profile->createAttribute('version', $version);

    cb_export_log('Updated the version number of system attribute: ' . $version,
        false);

    /****************************************
     *  update other data and schema
     ****************************************/

    $updater = new v7_8_1100_Updater();
    $updater->runBefore();
    $updater->runMiddle();
    $updater->runAfter();


    global $G_module_updater_after;
    $G_module_updater_after->requireUpdate('grn', $version);

    cb_export_log('Finished grn460_local_main. ', false);
}

grn460_local_main();
