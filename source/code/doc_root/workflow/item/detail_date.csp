<?php

//Get Smarty Instance
require_once("grn/smarty.csp");
$t = $smarty;

//Get Item
$item_for_view = $t->get_template_vars('item');

//Create Menu Params
switch ($display) {
    case 'detail':
        $folder_id = $t->get_template_vars('folder_id');
        $petition_id = $t->get_template_vars('petition_id');
        $menu_params = [
            'fid' => $folder_id,
            'pid' => $petition_id,
            'iid' => $item_for_view['iid']
        ];
        break;
    case 'detail-system':
        $category_id = $t->get_template_vars('category_id');
        $form_id = $t->get_template_vars('form_id');
        $menu_params = [
            'cid' => $category_id,
            'fid' => $form_id,
            'iid' => $item_for_view['iid']
        ];
        break;
    case 'detail-operation':
        $category_id = $t->get_template_vars('category_id');
        $form_id = $t->get_template_vars('form_id');
        $menu_params = [
            'cid' => $category_id,
            'fid' => $form_id,
            'iid' => $item_for_view['iid']
        ];
        break;
    default:
        break;
}

//Assign Display Infomation
//Assign Menu Params
$t->assign('menu_params', $menu_params);

//Assign Display
$t->assign('display', $display);
if ($item_for_view['settings']['initial_type'] == 1) {
    if (isset($item_for_view['settings']['date_type'])
        && $item_for_view['settings']['date_type'] == 1
    ) {
        if (strlen($item_for_view['settings']['initial_hour']) == 1) {
            $item_for_view['settings']['initial_hour'] = '0'
                                                         . $item_for_view['settings']['initial_hour'];
        }
        if (strlen($item_for_view['settings']['initial_minute']) == 1) {
            $item_for_view['settings']['initial_minute'] = '0'
                                                           . $item_for_view['settings']['initial_minute'];
        }
    }
}
//Assign Item Information
$t->assign('item', $item_for_view);

//-- set page title and site position

// Ignore Licence Warnning
$t->skipWarning();

// Display Smarty Template
$doc_name = cb_get_pagename();
$t->display("workflow/item/detail_date.tpl");


