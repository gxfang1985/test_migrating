<?php

/**
 * Description for Settings Parameters for Radio Item
 *
 * radio_items            ->      radio button item list (separator:\r\n)
 * initial_value          ->      initial_value
 **/

global $G_INPUT;

// instantiate an Smarty object
require_once("grn/smarty.csp");
//$t = $smarty;

//Get Item from Template Variable
$item_for_view = $t->get_template_vars('item');

//Check Table Name
if ($item_for_view['table'] == GRN_WORKFLOW_TABLE_ITEM) {
    if ( ! array_key_exists('text', $item_for_view)) {
        //Get Initial Value From Settings
        $item_for_view['text'] = $item_for_view['settings']['initial_value'];
    }
}

//Split Radio Items
$radio_items = mb_split("\r\n", $item_for_view['settings']['radio_items']);
foreach (array_keys($radio_items) as $key) {
    if (strlen($radio_items[$key]) == 0) {
        unset($radio_items[$key]);
    }
}
$item_for_view['settings']['radio_items'] = $radio_items;

//Assign Display Infomation
// Assign Item ID
$t->assign('item_id', $item_for_view['iid']);

// Display 
$t->assign('display', $display);

// Assign Item
$t->assign('item', $item_for_view);
// Assign Settings
$t->assign('settings', $item_for_view['settings']);

//-- set page title and site position

// Ignore Licence Warnning
$t->skipWarning();

// Display Smarty Template
$doc_name = cb_get_pagename();
$t->display("workflow/item/view_radio.tpl");


