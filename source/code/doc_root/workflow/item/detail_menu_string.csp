<?php

//Get Smarty Instance
require_once("grn/smarty.csp");
$t = $smarty;

//Get Item
$item_for_view = $t->get_template_vars('item');

//Create Menu Params
switch ($display) {
    case 'detail':
        $folder_id = $t->get_template_vars('folder_id');
        $petition_id = $t->get_template_vars('petition_id');
        $menu_params = [
            'fid' => $folder_id,
            'pid' => $petition_id,
            'iid' => $item_for_view['iid']
        ];
        break;
    case 'detail-system':
        $category_id = $t->get_template_vars('category_id');
        $form_id = $t->get_template_vars('form_id');
        $menu_params = [
            'cid' => $category_id,
            'fid' => $form_id,
            'iid' => $item_for_view['iid']
        ];
        break;
    case 'detail-operation':
        $category_id = $t->get_template_vars('category_id');
        $form_id = $t->get_template_vars('form_id');
        $menu_params = [
            'cid' => $category_id,
            'fid' => $form_id,
            'iid' => $item_for_view['iid']
        ];
        break;
    default:
        break;
}

if ( ! array_key_exists('menu_item_type', $item_for_view['settings'])) {
    $item_for_view['settings']['menu_item_type'] = null;
}
if ( ! array_key_exists('menu_items_userinfo', $item_for_view['settings'])) {
    $item_for_view['settings']['menu_items_userinfo'] = null;
}

//Assign Display Infomation
//Assign Menu Params
$t->assign('menu_params', $menu_params);

//Assign Display
$t->assign('display', $display);

//Assign Item Information
$t->assign('item', $item_for_view);

//-- set page title and site position

// Ignore Licence Warnning
$t->skipWarning();

// Display Smarty Template
$doc_name = cb_get_pagename();
$t->display("workflow/item/detail_menu_string.tpl");


