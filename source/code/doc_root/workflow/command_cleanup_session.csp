<?php
global $G_state_set;

$G_state_set->set('html_should_be_closed', false);
$G_state_set->set('copyright_should_be_written', false);

$suffix = $tmp_key = '';
if (isset($G_INPUT['session_suffix'])
    && '' !== trim($G_INPUT['session_suffix'])
) {
    $suffix = $G_INPUT['session_suffix'];
}
if (isset($G_INPUT['tmp_key'])) {
    $tmp_key = $G_INPUT['tmp_key'];
}

assert('! empty( $tmp_key )');

if ($tmp_key) {
    require_once('grn/smarty.csp');
    $t = new GRN_Smarty;

    require_once('workflow/controller_util.csp');
    grn_workflow_cleanup_session($t, $suffix, $tmp_key);
}
