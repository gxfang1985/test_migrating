<?php
require_once('mail/folder_tree.csp');
$class_name = 'GRN_Mail_FolderTree';
global $G_INPUT;
$oid = @$G_INPUT['oid'];
$page = @$G_INPUT['page'];
$page_parts = explode('/', $page);
$account_id = $page_parts[2];
$params = ['account_id' => $account_id];
if (count($page_parts) == 3) {
    if (is_numeric($page_parts[2])) {
        require_once('grn/org_tree.csp');
        $util = GRN_OrgTreeUtil::getInstance();
        $tree = $util->getTree($page, $class_name,
            ['account_id' => $account_id]);
        if ( ! $tree->containNode($oid)) {
            grn_mail_rebuild_folder_tree($page, $account_id, $oid);
        }
    }
}
include('../grn/_org_json_26.csp');

