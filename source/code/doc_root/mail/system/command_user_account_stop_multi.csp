<?php

if (0 == strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST')) {
    global $G_INPUT;
    $org_id = @ $G_INPUT['oid'];
    $user_id = @ $G_INPUT['uid'];

    global $G_container_base;
    $uum = $G_container_base->getInstance('uum');
    $user = $uum->getUser($user_id);
    if ( ! $user) {
        cb_throw_error(E_GRN_USER_NOT_FOUND);
    }

    $account_ids = @ $G_INPUT['aid'];
    if (is_array($account_ids)) {
        require_once('mail/system_config.csp');
        $system_config = GRN_Mail_SystemConfig::getInstance();
        $system_config->disableAccountDatas($account_ids);
    }
}

cb_redirect('mail/system/user_account_list',
    ['oid' => $org_id, 'uid' => $user_id, 'sf' => 1]);


