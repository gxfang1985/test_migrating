<?php

//-- instantiate Smarty object
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

//------------------

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

// get parameters from URL parameters
$mailserver_id = @ $G_INPUT['msid'];
if (is_null($mailserver_id) || $mailserver_id == "") {
    cb_throw_error(E_GRN_MAIL_SERVER_DATA_NOT_FOUND);
}
include('_mailserver_add.csp');

//type of encrypted connection
if ($use_SSL) {
    $t->assign('type_encrypted_connection',
        cb_msg('grn.mail.system', 'use_ssl'));
} elseif ($use_TLS) {
    $t->assign('type_encrypted_connection',
        cb_msg('grn.mail.system', 'use_tls'));
} else {
    $t->assign('type_encrypted_connection', cb_msg('grn.mail.system', 'none'));
}

// サーバー設定
$t->assign('set', $set);

// site position
$t->assign(
    'site_position', [
        [
            'page' => 'mail/system/mailserver',
            'name' => grn_get_page_display_name('mail/system/mailserver')
        ],
        [
            'page' => '',
            'name' => $page_title
        ]
    ]
);

//-- show page
$t->display(cb_get_pagename() . ".tpl");

