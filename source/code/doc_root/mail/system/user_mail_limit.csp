<?php
require_once("SmartyValidate.class.php");
//-- instantiate Smarty object
require_once("grn/smarty.csp");
$t = new GRN_Smarty;
global $G_INPUT;
$user_id = cb_at($G_INPUT, 'uid');
global $G_container_base;
$uum = $G_container_base->getInstance('uum');
$user = $uum->getUser($user_id);
if ( ! is_object($user) || ! is_a($user, 'CB_User')) {
    cb_throw_error(E_GRN_USER_NOT_FOUND);
}
$user_id = $user->getOID();
$t->assign('app_name', $G_mail_name);
include('_user_mail_limit.csp');

SmartyValidate::connect($t);
$target_name = 'mail/system/user_mail_limit';
// force to register
SmartyValidate::register_form($target_name);

$t->assign('mailbox_size', $mailbox_size);
$t->assign('receive_size', $receive_size);
$t->assign('send_size', $send_size);
//------------------
$t->assign('user_id', $user_id);
// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

// site position
$t->assign('site_position', [
    [
        'page' => 'mail/system/user_disk_size',
        'name' => grn_get_page_display_name('mail/system/user_disk_size')
    ],
    ['page' => '', 'name' => $page_title]
]);

//-- show page
$t->display(cb_get_pagename() . ".tpl");

