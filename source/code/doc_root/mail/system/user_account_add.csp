<?php

//-- instantiate Smarty object
require_once("grn/smarty.csp");
$t = new GRN_Smarty;
$doc_name = cb_get_pagename();

//------------------

// SmartyValidate should be initialized when an input form is there.
require('SmartyValidate.class.php');
SmartyValidate::connect($t);
SmartyValidate::register_form($doc_name, true);

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

include('_user_account_add.csp');

//------------------

// mail_server
$t->assign('mail_server', $mail_servers);

// アカウント設定
$t->assign('set', $set);

// ユーザー情報
$t->assign('user', $user_for_view);

// site position
$t->assign(
    'site_position', [
        [
            'page' => 'mail/system/user_account',
            'name' => grn_get_page_display_name('mail/system/user_account'),
            'oid'  => $org_id,
        ],
        [
            'page' => 'mail/system/user_account_list',
            'name' => grn_get_page_display_name('mail/system/user_account_list'),
            'oid'  => $org_id,
            'uid'  => $user_id
        ],
        [
            'page' => '',
            'name' => $page_title
        ]
    ]
);

//-- show page
$t->display("{$doc_name}.tpl");

