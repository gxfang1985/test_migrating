<?php
global $G_INPUT;

$foreign_key = $G_INPUT['foreign_key'];
$name = $G_INPUT['title'];
$apop = @ $G_INPUT['apop'];

$server_info = new GRN_Mail_ServerInfo();
$server_info->smtp = @ $G_INPUT['smtp_server'];
$server_info->smtp_port = @ $G_INPUT['smtp_port'];
$server_info->smtp_ssl = $G_INPUT['encrypted_connection'] == 'SSL' ? 1 : 0;
$server_info->smtp_tls = $G_INPUT['encrypted_connection'] == 'TLS' ? 1 : 0;
$server_info->smtp_auth = @ $G_INPUT['smtp_auth'];
/** Don't permit SMTP Authcation when authentication method is NONE. */
$server_info->smtp_set_account = cb_at($G_INPUT, "smtp_auth", "NONE")
                                 !== "NONE"
                                 && @ $G_INPUT['smtp_account_set'] == '1';
$server_info->pop_before_smtp = @ $G_INPUT['is_pop_before_smtp'] == '1';
$server_info->pbsmtp_wait_sec = @ $G_INPUT['pop_before_smtp_wait'];
$server_info->retrieve = @ $G_INPUT['received_server'];
$server_info->retrieve_port = @ $G_INPUT['received_port'];
$server_info->retrieve_ssl = @ (int)$G_INPUT['pop3s'];
$server_info->retrieve_auth = ((int)$apop == 1) ? 'APOP' : 'USER';
$server_info->retrieve_protocol = @ $G_INPUT['received_protocol'];
$server_info->smtp_timeout_sec = intval(@ $G_INPUT['smtp_timeout']);
$server_info->retrieve_timeout_sec = intval(@ $G_INPUT['retrieve_timeout']);

