<?php

//-- instantiate smarty object
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

//------------------

// get parameters from URL parameters
$mailserver_id = @ $G_INPUT['msid'];
if (is_null($mailserver_id) || $mailserver_id == "") {
    cb_throw_error(E_GRN_MAIL_SERVER_DATA_NOT_FOUND);
}
// メールサーバーの設定を取得
require_once('mail/system_config.csp');
$system_config = GRN_Mail_SystemConfig::getInstance();
$server_data = $system_config->getServerData($mailserver_id);

// set mailserrver
$t->assign(
    'set', [
        'msid'  => $mailserver_id,
        'title' => $server_data['name'],
    ]
);

//------------------

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

// site position
$t->assign(
    'site_position', [
        [
            'page' => 'mail/system/mailserver',
            'name' => grn_get_page_display_name('mail/system/mailserver')
        ],
        [
            'page' => 'mail/system/mailserver_view',
            'name' => grn_get_page_display_name('mail/system/mailserver_view'),
            'msid' => $mailserver_id
        ],
        [
            'page' => '',
            'name' => $page_title
        ]
    ]
);

//-- show page
$t->display(cb_get_pagename() . '.tpl');

