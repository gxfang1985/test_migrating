<?php

use grn\mail\screen\mobile\CommandMailList;
use grn\grn\JSONResponse;

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;
    $command_mail_list = new CommandMailList($G_INPUT);

    global $G_state_set;
    $G_state_set->set('error_page_type', 'json');

    $command = cb_at($G_INPUT, 'cmd');
    switch ($command) {
        case 'read' :
            $result = $command_mail_list->read();
            break;
        case 'unread':
            $result = $command_mail_list->unread();
            break;
        default :
            $result = false;
    }

    $json = JSONResponse::create();
    $json->response(['result' => $result]);
}
