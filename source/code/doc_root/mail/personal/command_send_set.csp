<?php

$account_id = @ $G_INPUT['aid'];

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;
    global $G_container_base;
    $uum = $G_container_base->getInstance('uum');
    $user = $uum->getLoginUser();
    if ( ! is_object($user)) {
        cb_throw_error(E_COMMON_AUTHENTICATION_FAILED);
    }

    if (is_string($account_id) && (strlen($account_id) > 0)) {
        $from_name = @ $G_INPUT['from_name'];

        // 送信設定
        require_once('mail/utility.csp');
        $utility = GRN_Mail_Utility::getInstance();
        $personal_config = $utility->getPersonalConfig($user);
        $personal_config->setAccountSendData($account_id, $from_name);
    }
}

cb_redirect('personal/application_list', ['app_id' => 'mail']);


