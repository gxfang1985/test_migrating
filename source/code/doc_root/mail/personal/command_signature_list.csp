<?php

$account_id = @ $G_INPUT['aid'];
$command = @ $G_INPUT['cmd'];

if (0 == strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST')) {
    global $G_container_base;
    $uum = $G_container_base->getInstance('uum');
    $user = $uum->getLoginUser();
    if ( ! is_object($user)) {
        cb_throw_error(E_COMMON_AUTHENTICATION_FAILED);
    }

    require_once('mail/utility.csp');
    $utility = GRN_Mail_Utility::getInstance();
    $personal_config = $utility->getPersonalConfig($user);

    // チェックした項目
    $sign_ids = @ $G_INPUT['ids'];
    if (is_array($sign_ids) && (count($sign_ids) > 0)) {
        if ($command == 'delete') {
            require_once('fw/session_manager.csp');
            $sm = CB_SessionManager::getInstance();
            $session = $sm->getSession('mail/personal/signature_list');

            // セッションに処理するメールデータIDリストを保存
            $session->set('sign_ids', $sign_ids);

            // 削除
            cb_redirect('mail/personal/signature_delete_multi',
                ['aid' => $account_id]);
        }
    }
}

cb_redirect('mail/personal/signature_list');


