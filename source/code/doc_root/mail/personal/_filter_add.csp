<?php

//-- get parameters from URL parameters
$account_data = $personal_config->getAccountData($account_id, false,
    true);
$use_trash = $personal_config->useTrash();
$use_status = $system_config->canUserUseStatus()
              && $personal_config->useStatus();
$use_address_history = $system_config->canUserUseHistory();

// statuses
if ($use_status) {
    require_once('mail/status.csp');
    $status_list = grn_mail_get_status_list($user);
    $status_infos_for_view = [];
    foreach ($status_list as $status_oid => $status) {
        $status_info = [];
        $status_info['value'] = $status_oid;
        $status_info['label'] = $status['name'];
        $status_info['selected'] = ($status_id == $status_oid);
        $status_info['color'] = $status['color'];
        $status_infos_for_view[] = $status_info;
    }
    $t->assign('status_infos', $status_infos_for_view);
}

//--------------------------------------------------------------

$t->assign('use_status', $use_status);
$t->assign('use_address_history', $use_address_history);



