<?php

global $G_INPUT;
$account_id = @ $G_INPUT['aid'];

if (0 == strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST')) {
    global $G_container_base;
    $uum = $G_container_base->getInstance('uum');
    $user = $uum->getLoginUser();
    if ( ! is_object($user)) {
        cb_throw_error(E_COMMON_AUTHENTICATION_FAILED);
    }

    $order = $G_INPUT['order'];

    // 署名の順番変更
    require_once('mail/utility.csp');
    $utility = GRN_Mail_Utility::getInstance();
    $personal_config = $utility->getPersonalConfig($user);
    $personal_config->changeSignatureOrder($order);
}

cb_redirect('mail/personal/signature_list', ['aid' => $account_id]);


