<?php

//-- instantiate Smarty object
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

//-- SmartyValidate should be initialized when an input form is there.
require('SmartyValidate.class.php');
$pagename = cb_get_pagename();

if (SmartyValidate::is_registered_form($pagename)) {
    SmartyValidate::unregister_form($pagename);
}

SmartyValidate::connect($t);

// register the form you want to validate
SmartyValidate::register_form($pagename);

//-- include sharing codes with command_*
include('_password.csp');

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);
// site position
$t->assign('site_position', [['page' => '', 'name' => $page_title]]);

//-- show page
$t->display($pagename . '.tpl');

