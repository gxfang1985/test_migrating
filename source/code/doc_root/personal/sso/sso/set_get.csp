<?php
//Get Smarty Instance
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

// SmartyValidate should be initialized when an input form is there.
require_once('SmartyValidate.class.php');
SmartyValidate::connect($t);
SmartyValidate::register_form('personal/sso/sso/set_get', true);

//Convert Personal Parameters for View
foreach ($method['driver_settings']['personal_params'] as $name => $value) {
    $application = 0;
    $value_items = explode('.', $value);
    if (count($value_items >= 3)) {
        if ($value_items[1] == 'common') {
            $application = $value_items[2];
        } else {
            $application = $value_items[1];
        }
    }
    $personal_param_names[] = $name;
    $personal_param_values[] = [
        'application' => $application,
        'option_id'   => $value,
        'value'       => $value,
    ];
}
$method['driver_settings']['personal_param_names'] = $personal_param_names;
$method['driver_settings']['personal_param_values'] = $personal_param_values;

//Assign Display Infomation
//Login Driver Display Infomation
$t->assign('sso_method', $method);
//Application Parameter
$t->assign('application', $identifier);
//Display Infomation
$t->assign('display', $display);

// Ignore Licence Warnning
$t->skipWarning();

// Display Smarty Template
$doc_name = cb_get_pagename();
$t->display("personal/sso/sso/set_get.tpl");


