<?php
if (0 != strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST')) {
    cb_redirect('personal/common_list', ['id' => 'ui']);
}

global $G_INPUT;

if ( ! (array_key_exists('tab', $G_INPUT)
        && in_array($G_INPUT['tab'], [0, 1, 2, 3]))
) {
    cb_redirect('/personal/common_list', ['id' => 'ui']);
}
require_once('grn/ui.csp');
$manager = GRN_UIConfigManager::getInstance();
$system_config = $manager->getSystemConfig();
if ( ! $system_config->getCanUserChangeHistory()) {
    cb_throw_error(E_GRN_NO_SYSTEM_PRIVILEGE);
}

$tab = $G_INPUT['tab'];

switch ($tab) {
    case 1:
        require_once('_command_dropdown-facilitygroup.csp');
        break;
    case 2:
        require_once('_command_dropdown-history.csp');
        break;
    case 3:
        require_once('_command_dropdown-mygroup.csp');
        break;
    case 0:
    default:
        require_once('_command_dropdown-group.csp');
        break;
}

cb_redirect('personal/common_list', ['id' => 'ui']);
