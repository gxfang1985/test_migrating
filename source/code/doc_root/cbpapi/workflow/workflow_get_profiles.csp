<?php
if (isset($cbpapi_service)) {
    $request = $cbpapi_service->getRequestParameters();

    require_once('workflow/config.csp');
    $config = GRN_Workflow_Configs::getInstance();
    $config = $config->getSystemConfig();

    $use_pending_approvals = $config->getApprovalPlan();
    $use_proxy_approvals = $config->getSubstituteApproval();
    $modify_proxies = $config->getPersonalAgentSetting();

    // SOAP response
    require_once('grn/smarty.csp');
    $t = new GRN_Smarty();

    $t->assign('xml_namespaces', [grn_cbpapi_get_namespace('workflow')]);
    $t->assign('action', $cbpapi_service->getAction());
    $t->assign('use_pending', $use_pending_approvals);
    $t->assign('use_proxy', $use_proxy_approvals);
    $t->assign('modify', $modify_proxies);

    grn_cbpapi_response($t, __FILE__);
}
