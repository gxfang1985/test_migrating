<?php

global $G_INPUT;

// Smarty をインスタンス化
require_once('grn/smarty.csp');
$t = new GRN_Smarty;

//------------------

// ユーザー取得
global $G_container_base;
$uum =& $G_container_base->getInstance('uum');

if ( ! array_key_exists('uid', $G_INPUT) || strlen($G_INPUT['uid']) < 1) {
    $user =& $uum->getLoginUser();
} else {
    $user =& $uum->getUser($G_INPUT['uid']);
}

if ( ! $user) {
    require_once('grn/error_code.csp');
    cb_throw_error(E_GRN_USER_NOT_FOUND);
}

$user_id = $user->getOID();


require_once('timecard/controller.csp');
$utility = new GRN_Timecard_ControllerUtil();

require('../_index.csp');

$oid = isset($G_INPUT['oid']) ? $G_INPUT['oid'] : null;
$t->assign('oid', $oid);

global $G_state_set;

// コピーライト表示OFF
$G_state_set->set('copyright_should_be_written', false);
$G_state_set->set('html_should_be_closed', false);

// 警告をOFF
$t->skipWarning();

$timezone = CB_I18N::getInstance()->getUserTimezone($user);
$t->assign("timezone_name", $timezone);

// Smarty実行
$t->display(cb_get_pagename() . ".tpl");


