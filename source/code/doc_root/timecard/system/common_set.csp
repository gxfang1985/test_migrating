<?php

global $G_INPUT;

// Smarty をインスタンス化
require_once('grn/smarty.csp');
$t = new GRN_Smarty;


require_once('timecard/controller.csp');
$utility = new GRN_Timecard_ControllerUtil();

$config = $utility->getConfigValues();

$limit_for_view = [];
for ($i = 0; $i <= $config['absence_limit']; ++$i) {
    $limit_for_view[$i] = ($i == $config['absence_max']);
}
$config['absence_limit_list'] = $limit_for_view;

$offset_day_list = [];
for ($i = 1; $i < 29; $i++) {
    $offset_day_list[$i] = ($config['offset_day'] == $i);
}

$config['offset_day_list'] = $offset_day_list;

$t->assign('config', $config);

$utility->setSitePosition($t, null);

// Smarty実行
$t->display(cb_get_pagename() . ".tpl");

