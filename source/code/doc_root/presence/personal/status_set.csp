<?php

require_once('grn/smarty.csp');
$t = new GRN_Smarty;

require_once('presence/config.csp');
$config_manager = GRN_Presence_ConfigManager::getInstance();

global $G_container_base;
$uum =& $G_container_base->getInstance('uum');
$login =& $uum->getLoginUser();

// アドレス帳の設定を取得する
$config =& $config_manager->getPersonalConfig($login);

// 在席情報の項目を取得する
$items = $config->getStatuses();

// 文字列に変換する
$str_items = implode("\r\n", $items);
$t->assign('items', $str_items);

// Smartyにページタイトルを割り当てる
$page_title = grn_get_page_display_name('presence/personal/status_set');
$t->assign('page_title', $page_title);
$t->assign('site_position', [['page' => "", 'name' => $page_title]]);

// Smartyを実行する
$t->display(cb_get_pagename() . '.tpl');


