<?php

//-- get parameters from URL parameters
$org_id = @ $G_INPUT['oid'];        // organization id
$user_id = @ $G_INPUT['uid'];       // user id
$poid = @ $G_INPUT['poid'];

if (@ $t) {
    $t->assign('org_id', $org_id);
    $t->assign('user_id', $user_id);
    $t->assign('poid', $poid);
}

//--access object
function &grn_get_presence_access_object($org_id, $user_id)
{
    global $G_container_base;
    $uum =& $G_container_base->getInstance('uum');

    if ($user_id) {
        //(for user)
        $object =& $uum->getUser($user_id);
        if ( ! $object) {
            cb_throw_error(E_GRN_USER_NOT_FOUND);
        }
    } elseif ($org_id) {
        //(for organization)
        $object =& $uum->getGroup($org_id);
        if ( ! $object) {
            cb_throw_error(E_GRN_GROUP_NOT_FOUND);
        }
    } else {
        cb_throw_error(E_GRN_PRESENCE_ACCESS_NOT_SELECT_OBJECT);
    }

    return $object;
}

