<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;

    require_once('memo/config.csp');
    $config = GRN_Memo_SystemConfig::getInstance();

    $config->setEnableHtmlEditor(@$G_INPUT['enable_htmleditor'] ? true : false);
    $config->setFileSizeLimit(intval($G_INPUT['filesize_limit']));

    //write log: Common setting
    require_once('memo/inspection.csp');
    $inspection = GRN_Memo_Inspection::getInstance();

    $filezie = $config->getFileSizeLimit();
    if ($config->getEnableHtmlEditor()) {
        $enable_editor = 1;
    } else {
        $enable_editor = 0;
    }

    $inspection->record('config', 'common',
        ['filesize_limit' => $filezie, 'enable_htmleditor' => $enable_editor]);

    cb_redirect('system/application_list', ['app_id' => 'memo']);
}
