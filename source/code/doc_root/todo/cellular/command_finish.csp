<?php

// 使用するパラメータの定義
$tid = @ $G_INPUT['tid'];

// TODOの完了処理
require_once('grn/application.csp');
$locator = GRN_ApplicationLocator::instance();
$app =& $locator->getInstance('todo');

if ( ! ($todo =& $app->get($G_cellular_login, $tid))) {
    cb_throw_error(E_GRN_TODO_NOT_FOUND);
}
$todo->setFinish(true);
//write log
require_once('todo/inspection.csp');
$inspection = GRN_ToDo_Inspection::getInstance();
if ($inspection->isEnabled()) {
    $inspection->record('finish', 'todo', ['tid' => $tid]);
}

// redirect
require_once('cellular/prepend.csp');
grn_cellular_redirect($G_pagepath . "/list");

