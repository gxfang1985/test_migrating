<?php

use grn\space\screen\mobile\application\todo\TodoAdd;
use grn\space\screen\common\MobileApplicationScreenCommon;
use grn\space\screen\GenericScreenBase;

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;

    $screen = new MobileApplicationScreenCommon(new TodoAdd($G_INPUT));
    $screen->post($G_INPUT);

    $from = @$G_INPUT[GenericScreenBase::ARG_FROM];
    if ($from == GenericScreenBase::FROM_DISCUSSION_DETAIL) {
        cb_redirect('space/mobile/application/discussion/detail',
            ['spid' => @$G_INPUT['spid'], 'tid' => @$G_INPUT['tid']]);
    } else {
        cb_redirect('space/mobile/application/todo/index',
            ['spid' => @$G_INPUT['spid'], 'tid' => @$G_INPUT['tid']]);
    }
}
