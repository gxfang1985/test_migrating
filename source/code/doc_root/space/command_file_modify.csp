<?php

use grn\space\screen\FileModify;
use grn\space\screen\common\ApplicationScreenCommon;
use grn\space\screen\GenericScreenBase;

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;

    $screen = new ApplicationScreenCommon(new FileModify($G_INPUT));
    $appType = $screen->post($G_INPUT);

    if ($appType == 1) {
        cb_redirect('space/application/discussion/file_view', [
            'spid' => @$G_INPUT['spid'],
            'fid'  => @$G_INPUT['fid'],
            'tid'  => @$G_INPUT['tid']
        ]);
    } else {
        cb_redirect('space/application/todo/file_view', [
            'spid' => @$G_INPUT['spid'],
            'fid'  => @$G_INPUT['fid'],
            'tid'  => @$G_INPUT['tid'],
            'from' => @ $G_INPUT[GenericScreenBase::ARG_FROM]
        ]);
    }
}
