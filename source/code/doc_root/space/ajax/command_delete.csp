<?php

use grn\grn\JSONResponse;
use grn\space\screen\CommandDeleteSpace;

if (0 == strcasecmp(cb_at($_SERVER, 'REQUEST_METHOD'), 'POST')) {
    global $G_INPUT;
    global $G_state_set;

    $G_state_set->set('html_should_be_closed', false);
    $G_state_set->set('copyright_should_be_written', false);
    $G_state_set->set('error_page_type', 'json');

    $screen = new CommandDeleteSpace($G_INPUT);
    $deleted_space = $screen->post($G_INPUT);

    $json = JSONResponse::create();
    $json->response(['cid' => $deleted_space->getCategoryId()]);
}
