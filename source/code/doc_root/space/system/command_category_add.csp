<?php

use grn\space\screen\SystemCommandCreateCategory;
use grn\space\screen\SystemCreateCategory;

global $G_INPUT;

require_once("grn/smarty.csp");
$t = new GRN_Smarty;

// Validation check
require_once('SmartyValidate.class.php');
SmartyValidate::connect($t);
$target_name = 'space/system/category_add';
SmartyValidate::register_form($target_name);

if (SmartyValidate::is_valid($G_INPUT, $target_name)) {
    $screen = new SystemCommandCreateCategory($G_INPUT);
    $result = $screen->post(null);

    SmartyValidate::unregister_form($target_name);

    cb_redirect($result['page'], $result['params']);
} else {
    $screen = new SystemCreateCategory($G_INPUT);
    $screen->setSmarty($t);

    echo($screen->fetch());
}
