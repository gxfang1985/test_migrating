<?php

//-- instantiate Smarty object
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

if (0 == strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST')) {
    //--current organization id
    $poid = @ $G_INPUT['poid'];

    require_once('portal/access_logic.csp');

    $logic = GRN_Portal_MyPortalAccessLogic::getInstance();
    $object =& $logic->getObject();
    $object_id = $object->getOID();

    // アクセス権の一覧を削除する
    $accesses = $logic->getAccesses($object_id);
    $logic->deleteAccesses($object_id, $accesses);

    // Myポータルの使用権限ページにリダイレクトする
    cb_redirect('portal/system/availability_list', ['poid' => $poid]);
}

