<?php

global $G_INPUT;

require_once('grn/smarty.csp');
$t = new GRN_Smarty;

$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);
$page_name = cb_get_pagename();

require('SmartyValidate.class.php');
SmartyValidate::connect($t);
SmartyValidate::register_form($page_name, true);

$charset = cb_at($G_INPUT, 'charset', null);
if (0 == strlen($charset)) {
    global $G_config_common;
    $charset = $G_config_common->get('I18N', 'default_external_encoding');
}

$skip = cb_at($G_INPUT, 'skip', null);

$t->assign('charset', $charset);
$t->assign('skip', $skip);

// Site Position
$t->assign('site_position', [
        [
            "page" => 'system/application/availability_user_list',
            "name" => grn_get_page_display_name("system/application/availability_user_list")
        ],
        [
            "page" => 'system/application/external_access_detail',
            "name" => grn_get_page_display_name("system/application/external_access_detail")
        ],
        [
            'page' => '',
            'name' => $page_title
        ]
    ]
);

$t->display("{$page_name}.tpl");
