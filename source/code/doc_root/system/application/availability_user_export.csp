<?php

use grn\grn\access\utility\AppAvailabilityUtil;

require_once('grn/smarty.csp');
$t = new GRN_Smarty;

// Available apps
require_once('grn/application.csp');
$locator = GRN_ApplicationLocator::instance();
$activated_app_ids = AppAvailabilityUtil::getActiveAppIds();
$available_apps = [];
foreach ($activated_app_ids as $app_id) {
    $app = $locator->getInstance($app_id, true);
    $available_apps[] = $app->getName();
}
$t->assign('available_apps', $available_apps);

// Page Title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

// Site Position
$t->assign('site_position', [
        [
            'page' => '',
            'name' => grn_get_page_display_name('system/application/availability_user_export')
        ]
    ]
);

$page_name = cb_get_pagename();
$t->display($page_name . '.tpl');
