<?php

require_once('grn/smarty.csp');
$t = new GRN_Smarty;

$base_id = isset($G_INPUT['bid']) ? $G_INPUT['bid'] : null;

require_once("fw/i18n/base.csp");
$base = CB_Base::select($base_id);
if (is_null($base)) {
    cb_throw_error(E_COMMON_BASE_WAS_NOT_FOUND);
}

$t->assign('base', [
    'id'   => $base->getId(),
    'name' => $base->getLocalName(),
]);

$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

$t->assign(
    'site_position', [
        [
            'page' => 'system/calendar/base/index',
            'name' => grn_get_page_display_name('system/calendar/base/index'),
        ],
        [
            'page' => 'system/calendar/base/base_detail',
            'name' => grn_get_page_display_name('system/calendar/base/base_detail'),
            'bid'  => $base->getId(),
        ],
        [
            'page' => '',
            'name' => $page_title,
        ],
    ]
);

$t->display(cb_get_pagename() . '.tpl');
