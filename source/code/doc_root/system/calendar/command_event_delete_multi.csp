<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    // instantiate an Smarty object
    require_once('grn/smarty.csp');
    $t = new GRN_Smarty;

    $scid = @$G_INPUT['scid'];
    $bdate = @$G_INPUT['bdate'];
    $eids = @$G_INPUT['eid'];

    require_once('grn/calendar.csp');
    $cm = GRN_CalendarManager::getInstance();
    $c = $cm->getSystemCalendar($scid);
    if ( ! $c) {
        cb_throw_error(E_GRN_CALENDAR_CALENDAR_NOT_FOUND);
    }

    foreach ($eids as $eid) {
        $c->removeDayInfoById($eid);
    }

    cb_redirect('system/calendar/systemcalendar_list',
        ['scid' => $scid, 'bdate' => $bdate]);
}


