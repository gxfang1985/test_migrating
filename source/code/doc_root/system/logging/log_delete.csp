<?php

require_once('grn/logger.csp');
require_once('grn/smarty.csp');
$t = new GRN_Smarty;
$logic = GRN_LoggingLogic::getInstance();

$lid = @$G_INPUT['lid'];
$priority = @$G_INPUT['priority'];
$category = @$G_INPUT['category'];

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

$admin_page = 'system/logging/admin';
$view_page = 'system/logging/view';

// site position 
$t->assign(
    'site_position', [
        [
            'page'     => $admin_page,
            'name'     => grn_get_page_display_name($admin_page),
            'priority' => $priority,
            'category' => $category,
            'sf'       => 1
        ],
        [
            'page'     => $view_page,
            'name'     => grn_get_page_display_name($view_page),
            'priority' => $priority,
            'category' => $category,
            'lid'      => $lid
        ],
        ['page' => "", 'name' => $page_title]
    ]
);

$t->assign('category', $category);
$t->assign('priority', $priority);
$t->assign('lid', $lid);

// Smarty実行
$t->display(cb_get_pagename() . ".tpl");


