<?php

require_once('grn/logger.csp');
require_once('grn/smarty.csp');
$t = new GRN_Smarty;
$logic = GRN_LoggingLogic::getInstance();

$priority = @$G_INPUT['priority'];
$category = @$G_INPUT['category'];
$logic->checkCategoryInput($category);
$log_category = $logic->getLogCategory($category);
$category_name = $logic->getCategoryName($log_category);

$logs = @$G_INPUT['eid'];
$delete_numbers = count($logs);

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

$admin_page = 'system/logging/admin';

// site position 
$t->assign(
    'site_position', [
        [
            'page'     => $admin_page,
            'name'     => grn_get_page_display_name($admin_page),
            'priority' => $priority,
            'category' => $category,
            'sf'       => 1
        ],
        ['page' => "", 'name' => $page_title]
    ]
);

$t->assign('priority', $priority);
$t->assign('category', $category);
$t->assign('category_name', $category_name);
$t->assign('delete_numbers', $delete_numbers);
$t->assign('logs', $logs);

// Smarty実行
$t->display(cb_get_pagename() . ".tpl");


