<?php

require_once('grn/logger.csp');
require_once('grn/smarty.csp');

$t = new GRN_Smarty;
$logic = GRN_LoggingLogic::getInstance();

$priority = @$G_INPUT['priority'];
$category = @$G_INPUT['category'];
$logic->checkCategoryInput($category);
$log_category = $logic->getLogCategory($category);
$category_name = $logic->getCategoryName($log_category);

$term = new CB_Date;
$term->year = @$G_INPUT['term_year'];
$term->month = @$G_INPUT['term_month'];
$term->day = @$G_INPUT['term_day'];

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

$admin_page = 'system/logging/admin';

// site position 
$t->assign(
    'site_position', [
        [
            'page'     => $admin_page,
            'name'     => grn_get_page_display_name($admin_page),
            'priority' => $priority,
            'category' => $category,
            'sf'       => 1
        ],
        ['page' => "", 'name' => $page_title]
    ]
);

$t->assign('date', $term);
$t->assign('priority', $priority);
$t->assign('category', $category);
$t->assign('category_name', $category_name);
$t->display(cb_get_pagename() . ".tpl");


