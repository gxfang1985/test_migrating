<?php

//-- instantiate Smarty object
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

//-- get parameters from URL paramters
$column_id = @ $G_INPUT['clid'];

global $G_container_base;
/** @var GRN_Uum $uum */
$uum =& $G_container_base->getInstance('uum');

$column =& $uum->getItem($column_id);
if ( ! $column) {
    cb_throw_error(E_GRN_USER_COLUMN_NOT_FOUND);
}
$column_name = $column->get('display_name');
unset($column);

//-- assign smarty parameters
$t->assign('clid', $column_id);
$t->assign('clname', $column_name);

//-- set page title and site position
$page_list = 'system/user/user_column_list';
$page_view = 'system/user/user_column_view';

// use $page_title for both page title and site position
$page_title = grn_get_current_page_display_name();

// set page title
$t->assign('page_title', $page_title);

// set site position
$t->assign(
    'site_position',
    [
        ['page' => $page_list, 'name' => grn_get_page_display_name($page_list)],
        [
            'page' => $page_view,
            'name' => grn_get_page_display_name($page_view),
            'clid' => $column_id
        ],
        ['page' => "", 'name' => $page_title],
    ]
);


//-- show page
$t->display(cb_get_pagename() . '.tpl');


