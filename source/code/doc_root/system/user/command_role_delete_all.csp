<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    /** @var GRN_Uum $uum */
    $uum = $G_container_base->getInstance('uum');

    $role_table = $uum->getRoleTable();
    $rowset = new CB_RowSet($role_table);
    while ( ! is_null($row = $rowset->iterate())) {
        $role_id = $row->getOID();
        $uum->removeStaticRole($role_id);
    }

    $uum->execInspection('role', 'delete_all', null);
    cb_redirect('system/user/role_list');
}
