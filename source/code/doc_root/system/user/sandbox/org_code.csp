<?php

use grn\system\sandbox\GRN_UumUtil_Sandbox;

//-- instantiate smarty object
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

global $G_state_set;
$G_state_set->set('copyright_should_be_written', false);
$G_state_set->set('html_should_be_closed', false);

//-- get parameters from URL parameters
global $G_INPUT;
$org_id = cb_at($G_INPUT, 'oid');

//-- get entire organization tree
$uum_util = GRN_UumUtil_Sandbox::getInstance();
$org_tree = $uum_util->getEntireGroupTree();

$t->assign('org_tree', $org_tree);

//-- page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);
$t->assign('title_of_grn_title', cb_msg("grn.system.user", "org_code"));

//-- site position
require_once('grn/controller.csp');
$page_infos = [
    'index'    => [],
    'org_list' => ['oid' => $org_id, 'sf' => 1],
    'org_code' => null,
];
$util = new GRN_ControllerUtil();
$site_position = $util->makeSitePosition('system/user/sandbox/', $page_infos);
$t->assign('site_position', $site_position);

$t->assign('is_sandbox_page', true);

$t->display('system/user/org_code.tpl');


