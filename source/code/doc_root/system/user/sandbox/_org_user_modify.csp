<?php

use grn\system\sandbox\GRN_Uum_Sandbox;

if ( ! isset($session_name)) {
    $session_name = 'grn.system.sandbox.org_user_belong';
}

require_once('fw/session_manager.csp');
$session_manager = CB_SessionManager::getInstance();
$session =& $session_manager->getSession($session_name);
$session->set('org_ids', $org_ids);

$t->assign('session', $session_name);

require_once('fw/i18n/base.csp');
$base_id = isset($selected_base) ? $selected_base : null;
if (is_null($base_id)) {
    $uum = GRN_Uum_Sandbox::getInstance();
    $user_base_setting = $uum->getBaseSettingByUser($uum->getUser($user_id));
    $base_id = $user_base_setting->getBase();
}
$bases_param = CB_BaseManager::getBaseSelectParams($base_id);
$t->assign('bases_param', $bases_param);

// Smartyにページタイトルを割り当てる
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);
$t->assign('title_of_grn_title', cb_msg("grn.system.user", "org_user_modify"));

// Smartyにサイトポジションを割り当てる
$page_infos = [
    'index'           => [],
    'org_list'        => ['oid' => $org_id, 'sf' => 1],
    'org_user_view'   => ['oid' => $org_id, 'uid' => $user_id, 'sf' => 1],
    'org_user_modify' => null,
];
$site_position = $controller_util->makeSitePosition('system/user/sandbox/',
    $page_infos);
$t->assign('site_position', $site_position);


