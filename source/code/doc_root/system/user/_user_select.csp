<?php

require_once('fw/session_manager.csp');
$session_manager = CB_SessionManager::getInstance();
$session =& $session_manager->getSession('system');
$user_list = $session->get('user_list');
if (is_null($user_list)) {
    $user_list = [];
}

$func = @ $G_INPUT['user_select_func'];
if ($func == 'add_users') {
    $uids = @ $G_INPUT['uid'];
    if (is_array($uids)) {
        foreach ($uids as $id) {
            $user_list[] = $id;
        }
        $user_list = array_unique($user_list);
        sort($user_list);
    }
} elseif ($func == 'remove_users') {
    $uids = @ $G_INPUT['s_uid'];
    if (is_array($uids)) {
        foreach ($uids as $id) {
            unset($user_list[array_search($id, $user_list)]);
        }
    }
}

$session->set('user_list', $user_list);


