<?php

$prepend = cb_basedir() . '/code/doc_root/' . dirname(cb_get_pagename())
           . '/_prepend.csp';
if (file_exists($prepend)) {
    include_once($prepend);
}
unset($prepend);

require_once('grn/org_privilege.csp');
$privilege_logic = GRN_OrganizationPrivilegeLogic::getInstance();

global $G_state_set;
if ( ! $G_state_set->get('error_occurred')) {
    if ( ! $privilege_logic->isAdmin()
         && ! $privilege_logic->isPrivilegedPage()
    ) {
        cb_throw_error(E_GRN_NO_SYSTEM_PRIVILEGE);
    }
}

