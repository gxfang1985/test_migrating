<?php

if (0 == strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST')) {
    // システムデフォルト設定ロジックを取得する
    require_once('grn/ui.csp');
    $manager = GRN_UIConfigManager::getInstance();
    assert('is_object( $manager ) && is_a( $manager, \'GRN_UIConfigManager\' )');
    $config =& $manager->getSystemConfig();
    assert('is_object( $config ) && is_a( $config, \'GRN_UIConfig\' )');

    // 入力フォームデータを取得する
    $display_application_menu = @ $G_INPUT['display_application_menu'];
    $application_menu_style = @ $G_INPUT['application_menu_style'];
    $can_user_change_headers = @ $G_INPUT['can_user_change_headers'];

    // アプリケーションメニューの表示
    $config->setDisplayApplicationMenu(1 == $display_application_menu);

    // アプリケーションメニューの表示形式
    $config->setApplicationMenuStyle($application_menu_style);

    // ユーザによる設定変更の許可
    $config->setCanUserChangeHeaders(1 == $can_user_change_headers);
}

cb_redirect('system/common_list', ['id' => 'ui']);


