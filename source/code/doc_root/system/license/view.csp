<?php

require_once('grn/smarty.csp');
$t = new GRN_Smarty;

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

// site position
$page_list = 'system/license/admin';
$page_history = 'system/license/history';
$t->assign(
    'site_position',
    [
        ['page' => $page_list, 'name' => grn_get_page_display_name($page_list)],
        [
            'page' => $page_history,
            'name' => grn_get_page_display_name($page_history)
        ],
        ['page' => "", 'name' => $page_title],
    ]
);


require_once('grn/license.csp');

$id = @$G_INPUT['id'];
$lm = GRN_LicenseManager::getInstance();
$license_info = $lm->getLicenseByOID($id);
if (false === $license_info) {
    cb_throw_error(E_GRN_LICENSE_NOT_FOUND);
}

$logic = $lm->getLogic($license_info['type']);
$for_view = $logic->getPropertiesArray($license_info);
$t->assign('license', $for_view);

$t->display(cb_get_pagename() . '.tpl');


