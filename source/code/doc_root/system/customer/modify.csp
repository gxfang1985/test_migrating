<?php

require_once('grn/smarty.csp');
$t = new GRN_Smarty();

/*
//-- Validation check
require_once('SmartyValidate.class.php');
SmartyValidate::connect($t);
// register the form you want to validate
SmartyValidate::register_form( 'system/customer/modify' );
*/
require_once('grn/customer.csp');
$customer = GRN_Customer::getInstance();

$customer_data = [];
$customer_data['customer_id'] = $customer->getProperty('customer_id');
$customer_data['company_name'] = $customer->getProperty('company_name');
$customer_data['company_name2'] = $customer->getProperty('company_name2');
$customer_data['logo_path'] = $customer->getProperty('logo_path');
$logo = $customer->getProperty('logo_file');
if ($logo) {
    $body = $logo->getCurrentBody();
    $customer_data['logo_file'] = ['name' => $body->get('name')];
} else {
    $customer_data['logo_file'] = null;
}
$t->assign('customer_data', $customer_data);

require('_modify.csp');


// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);
// site position 
$t->assign(
    'site_position', [
        [
            'page' => "system/customer/index",
            'name' => grn_get_page_display_name('system/customer/index')
        ],
        ['page' => "", 'name' => $page_title]
    ]
);

$t->display(cb_get_pagename() . '.tpl');


