<?php

require_once("grn/smarty.csp");
$t = new GRN_Smarty();

require_once('fw/session_manager.csp');
$sm = CB_SessionManager::getInstance();
$session =& $sm->getSession('system/support/support');

$names = [
    'subject',
    'id',
    'name',
    'yomi',
    'admin_name',
    'admin_yomi',
    'group',
    'email',
    'phone',
    'expire',
    'os',
    'webserver',
    'docdir',
    'cgidir',
    'usercount',
    'productinfo'
];

foreach ($names as $name) {
    $raw = $session->get('raw_' . $name);
    $enc = $session->get('enc_' . $name);
    $t->assign('raw_' . $name, $raw);
    $t->assign('enc_' . $name, $enc);
}

// Smartyにページタイトルを割り当てる
$page_title = grn_get_page_display_name('common/support_send');
$t->assign('page_title', $page_title);

// Smartyにサイトポジションを割り当てる
$t->assign('site_position',
    [
        [
            'name' => grn_get_page_display_name('system/index'),
            'page' => 'system/index'
        ],
        [
            'name' => grn_get_page_display_name('common/support'),
            'page' => 'system/support/support',
            'sf'   => 1
        ],
        ['name' => $page_title, 'page' => null],
    ]
);

$t->display(cb_get_pagename() . ".tpl");


