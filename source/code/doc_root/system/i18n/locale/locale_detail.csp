<?php

require_once("fw/i18n/locale.csp");

if ( ! array_key_exists("lid", $G_INPUT)) {
    cb_throw_error(E_COMMON_LOCALE_WAS_NOT_FOUND);
}

require_once('grn/smarty.csp');
$t = new GRN_Smarty;

require_once("fw/i18n.csp");
$i18n = CB_I18N::getInstance();

$current_language = $i18n->getCurrentLanguage();
$active_language = CB_LanguageManager::getAvailableLanguages();
$active_language[] = CB_LanguageManager::$LANGUAGE_CODE_PREFER_BROWSER_SETTING;

$locale_id = $G_INPUT["lid"];
$locale = CB_Locale::select($locale_id);

if (is_null($locale)) {
    cb_throw_error(E_COMMON_LOCALE_WAS_NOT_FOUND);
}

$t->assign("lid", $locale->getId());
$t->assign("locale_name", $locale->getLocalName());
$t->assign("locale_code", $locale->getCode());
$t->assign("language_code", $locale->getLanguageCode());
$t->assign("long_date_format", $locale->getLongDateFormat());
$t->assign("short_date_format", $locale->getShortDateFormat());
$t->assign("time_format", $locale->getTimeFormat());

$t->assign('page_title',
    grn_get_page_display_name("system/i18n/locale/locale_detail"));

$t->assign(
    'site_position', [
        0 =>
            [
                'page' => '/system/i18n/locale/locale',
                'name' => grn_get_page_display_name("system/i18n/locale/locale"),
            ],
        1 =>
            [
                'page' => '',
                'name' => grn_get_page_display_name("system/i18n/locale/locale_detail"),
            ],
    ]
);

$t->display(cb_get_pagename() . '.tpl');
