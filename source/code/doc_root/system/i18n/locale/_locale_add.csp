<?php
require_once("fw/i18n.csp");
require_once("fw/i18n/locale.csp");

$i18n = CB_I18n::getInstance();
$current_language = $i18n->getCurrentLanguage(); //TODO 前の画面で選んだ言語にすべき。

$availableLanguage = CB_LanguageManager::getAvailableLanguages();
$availableLanguage[]
    = CB_LanguageManager::$LANGUAGE_CODE_PREFER_BROWSER_SETTING;

$long_date_format = [];
$short_date_format = [];
$time_format = [];
foreach ($availableLanguage as $language_code) {
    $long_date_format[$language_code]
        = CB_DateTimeFormatManager::getDateFormats($language_code);
    $short_date_format[$language_code]
        = CB_DateTimeFormatManager::getDateFormats($language_code);
    $time_format[$language_code]
        = CB_DateTimeFormatManager::getTimeFormats($language_code);
}

$t->assign("long_date_format_list", $long_date_format);
$t->assign("short_date_format_list", $short_date_format);
$t->assign("time_format_list", $time_format);
$t->assign("language_code_list", $availableLanguage);
$t->assign("selected_language", $current_language);

$t->assign('page_title',
    grn_get_page_display_name("system/i18n/locale/locale_add"));

$t->assign('site_position', [
    [
        'page' => 'system/i18n/locale/locale',
        'name' => grn_get_page_display_name("system/i18n/locale/locale"),
    ],
    [
        'page' => '',
        'name' => grn_get_page_display_name("system/i18n/locale/locale_add"),
    ],
]);
