<?php

use grn\cydec\mq\MessageQueue;
use grn\grn\JSONResponse;

global $G_state_set;
$G_state_set->set('error_page_type', 'json');
$G_state_set->set('html_should_be_closed', false);
$G_state_set->set('copyright_should_be_written', false);

$mq = new MessageQueue();
$queue = $mq->getTopQueue();
$queue['count'] = $mq->getCountRemainingQueue();

$jsonResponse = JSONResponse::create();
$jsonResponse->response($queue);
