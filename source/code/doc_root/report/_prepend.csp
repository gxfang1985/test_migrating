<?php

global $G_report_app_name, $G_report_login_user;

//Get Application Locator
require_once('grn/application.csp');
$locator = GRN_ApplicationLocator::instance();

//Set Application Name
require_once('report/resources.csp');
$G_report_app_name = $locator->getName(GRN_REPORT_APPLICATION_ID);

//Get Login User
$G_report_login_user = null;
require_once('grn/uum.csp');
global $G_container_base;
$grn_uum = $G_container_base->getInstance('uum');
$login_user = $grn_uum->getLoginUser();
if ($login_user) {
    $G_report_login_user = $login_user;
}

use grn\report\screen\mobile\MobileReportScreenBase;

global $G_state_set, $G_INPUT;
if ($G_state_set->get('is_cybozu_browser')
    && strpos(cb_get_pagename(), 'file_download') === false
) {
    MobileReportScreenBase::redirectMobilePage($G_INPUT);
}
