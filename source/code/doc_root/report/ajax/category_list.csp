<?php
require_once("grn/smarty.csp");
$t = new GRN_Smarty;
global $G_state_set;
$G_state_set->set('html_should_be_closed', false);
$G_state_set->set('copyright_should_be_written', false);

$cid = $G_INPUT['cid'];

if ($cid == GRN_REPORT_CATEGORY_ROOT_ID) {
    $t->assign('is_root', true);
}

require_once('report/controller_util.csp');
$category_util = GRN_Report_Category_Controller_Utility::getInstance();
$translation_map_category = [
    //Category Information
    'id'          => '_id',             //Category ID
    'name'        => 'name',            //Category Name
    'foreign_key' => 'foreign_key',     //Category Foreign key
    'memo'        => 'memo',            //Category Memo
    'parent'      => 'parent',          //Category Parent
    'list_index'  => 'list_index',      //Category List Index
];

//Get Current Category for View
$category_list = $category_util->getChildListView($cid,
    $translation_map_category, GRN_REPORT_ACCESS_TYPE_PERSONAL);
$t->assign('category_list', $category_list);
//Display Smarty Template
$t->display(cb_get_pagename() . ".tpl");
