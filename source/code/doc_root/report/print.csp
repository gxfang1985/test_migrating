<?php

require_once('grn/smarty.csp');
$t = new GRN_Smarty;

include('_print.csp');
$view_page = 'report/view';
if (isset($report) && $report['draft']) {
    $view_page = 'report/view_draft';
}
$t->assign('view_page', $view_page);
// View Access Right
require_once('report/controller_util.csp');
$report_util = GRN_Report_Report_Controller_Utility::getInstance();
if ( ! $report_util->isViewable($user_id, $report_id)) {
    require_once('report/error_code.csp');
    cb_throw_error(E_GRN_RPRT_REPORT_DENY_ACCESS);
}

$t->display("{$page_name}.tpl");
