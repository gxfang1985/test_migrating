<?php
//Get Category Controller Utility
require_once('report/controller_util.csp');
$category_util = GRN_Report_Category_Controller_Utility::getInstance();

//Create Parameter Translation Map
$translation_map_parent_category = [
    //Category Information
    'cid'  => '_id',             //Category ID
    'name' => 'name',            //Category Name
];

//Parent Category
$parent_category_for_view = [];

//Root Category Flag
$is_root = false;
if ($category_id == GRN_REPORT_CATEGORY_ROOT_ID || is_null($category_id)) {
    $is_root = true;
    $parent_category_for_view['cid'] = GRN_REPORT_CATEGORY_ROOT_ID;
    $parent_category_for_view['name'] = cb_msg('grn.report', '(root)');
}

//Get Parent Category
if ( ! $is_root) {
    $parent_category_for_view = $category_util->getView($parent_category_id,
        $translation_map_parent_category, GRN_REPORT_ACCESS_TYPE_MANAGE);
}

//Assign Parent Category Code
$t->assign('pcid', $parent_category_for_view['cid']);
//Assign Parent Category Name
$t->assign('pname', $parent_category_for_view['name']);

//Assign Root Category Flag
$t->assign('is_root', $is_root);
