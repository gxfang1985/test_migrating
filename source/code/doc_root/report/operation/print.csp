<?php

require_once('grn/smarty.csp');
$t = new GRN_Smarty;

include('../_print.csp');

if ($form && $form['active'] == 1 && $form['deleted'] != 1) {
    $category_id = $form['category'];

    //Check Nonparty Category
    if (GRN_REPORT_CATEGORY_NONPARTY_ID == $category_id) {
        require_once('report/error_code.csp');
        cb_throw_error(E_GRN_RPRT_MANAGE_DENY_NONPARTY_CATEGORY);
    }

    //Check Category Manage and Access Right
    $category_util = GRN_Report_Category_Controller_Utility::getInstance();
    $category_util->checkManage($category_id, true, CB_DATABASE_NO_LOCK);
    $category_util->checkAccess($category_id, true, CB_DATABASE_NO_LOCK);
}

$t->display("{$page_name}.tpl");
