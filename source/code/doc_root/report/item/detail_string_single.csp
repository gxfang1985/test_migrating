<?php

use grn\grn\item\StringSingleDetail;

//Get Smarty Instance
require_once("grn/smarty.csp");
$t = $smarty;

//Get Item
$item_for_view = $t->get_template_vars('item');

//Convert Initial User Value
require_once('grn/sso.csp');
$sso_service = GRN_SSO_Service::getInstance();
$identifier_list = $sso_service->getSSOIdentifierList('uum');
$reverse_identifier_list = array_flip($identifier_list['uum']);
StringSingleDetail::setInitialValue($item_for_view, $reverse_identifier_list);

//Create Menu Params
switch ($display) {
    case 'detail':
        $report_id = $t->get_template_vars('report_id');
        $menu_params = ['rid' => $report_id, 'iid' => $item_for_view['iid']];
        break;
    case 'detail-system':
        $category_id = $t->get_template_vars('category_id');
        $form_id = $t->get_template_vars('form_id');
        $menu_params = [
            'cid' => $category_id,
            'fid' => $form_id,
            'iid' => $item_for_view['iid']
        ];
        break;
    case 'detail-operation':
        $category_id = $t->get_template_vars('category_id');
        $form_id = $t->get_template_vars('form_id');
        $menu_params = [
            'cid' => $category_id,
            'fid' => $form_id,
            'iid' => $item_for_view['iid']
        ];
        break;
    default:
        break;
}

//Assign Display Infomation
$t->assign('menu_params', $menu_params);
$t->assign('display', $display);
$t->assign('item', $item_for_view);

//-- set page title and site position

// Ignore Licence Warnning
$t->skipWarning();

// Display Smarty Template
$t->display("report/item/detail_string_single.tpl");


