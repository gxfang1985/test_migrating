<?php

//Get Smarty Instance
require_once("grn/smarty.csp");
$t = $smarty;

//Get Item
$item_for_view = $t->get_template_vars('item');

//Create Menu Params
$menu_params = [];
switch ($display) {
    case 'detail':
        $report_id = $t->get_template_vars('report_id');
        $menu_params = ['rid' => $report_id, 'iid' => $item_for_view['iid']];
        break;
    case 'detail-system':
        $category_id = $t->get_template_vars('category_id');
        $form_id = $t->get_template_vars('form_id');
        $menu_params = [
            'cid' => $category_id,
            'fid' => $form_id,
            'iid' => $item_for_view['iid']
        ];
        break;
    case 'detail-operation':
        $category_id = $t->get_template_vars('category_id');
        $form_id = $t->get_template_vars('form_id');
        $menu_params = [
            'cid' => $category_id,
            'fid' => $form_id,
            'iid' => $item_for_view['iid']
        ];
        break;
    default:
        break;
}

if (isset($item_for_view['settings']['initial_minute'])
    && isset($item_for_view['settings']['initial_hour'])
) {
    $time = new CB_Time();
    $time->hour
        = $item_for_view['settings']['initial_hour'];
    $time->minute
        = $item_for_view['settings']['initial_minute'];
    $item_for_view['settings']['initial_time'] = $time;
}

//Assign Display Infomation
$t->assign('menu_params', $menu_params);
$t->assign('display', $display);
$t->assign('item', $item_for_view);

//-- set page title and site position

// Ignore Licence Warnning
$t->skipWarning();

// Display Smarty Template
$doc_name = cb_get_pagename();
$t->display("report/item/detail_time.tpl");


