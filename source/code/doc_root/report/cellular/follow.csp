<?php

//Parameter
$report_id = @ $G_INPUT['rid'];
$type = @ $G_INPUT['type'];
$follow = @ $G_INPUT['follow'];

//Smarty
require_once('cellular/smarty.csp');
$smarty = new GRN_Cellular_Smarty;

require_once('SmartyValidate.class.php');
SmartyValidate::connect($smarty);
$form_name = 'report/cellular/follow';
SmartyValidate::register_form($form_name, true);
$smarty->assign('form_name', $form_name);

//Page Information
$smarty->assign('pagetitle', grn_get_current_page_display_name());
$smarty->assign('pagepath', $G_pagepath);
$smarty->assign('pagename', cb_get_pagename());

//Get Report
require_once('report/controller_util.csp');
$report_util = GRN_Report_Report_Controller_Utility::getInstance();
$report = $report_util->getSimpleView($report_id);
if ( ! $report || $report['draft']) {
    require_once('report/error_code.csp');
    cb_throw_error(E_GRN_RPRT_REPORT_NOT_FOUND);
}

if (mb_strlen($follow) > 1024) {
    $follow = mb_substr($follow, 0, 1024);
}

$smarty->assign('rid', $report_id);
$smarty->assign('type', $type);
$smarty->assign('follow', $follow);

$smarty->display(cb_get_pagename() . '.tpl');

