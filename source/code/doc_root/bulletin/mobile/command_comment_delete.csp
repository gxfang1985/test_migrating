<?php

use grn\grn\mobile\MobileScreenCommon;
use grn\bulletin\screen\mobile\CommentDelete;
use grn\grn\JSONResponse;

if (strcasecmp(@$_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;
    $screen = new MobileScreenCommon(new CommentDelete($G_INPUT));

    global $G_state_set;
    $G_state_set->set('error_page_type', 'json');

    $screen->post($G_INPUT);

    $json = JSONResponse::create();
    $json->response([
        'redirect' => cb_format_url('bulletin/mobile/view',
            ['cid' => $G_INPUT['cid'], 'aid' => $G_INPUT['aid']], 'comment_top')
    ]);
}
