<?php

global $G_INPUT;

// Smarty をインスタンス化
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

include('../_notify_list.csp');

require_once('bulletin/controller.csp');
$utility = new GRN_Bulletin_ControllerUtil();

$nid = cb_at($G_INPUT, 'nid');
if ($nid) {
    if ($nid != 1) {
        $utility->prepareMakeSitePosition($t, $nid, null, $nid);
    } else {
        $page_path = [
            'bulletin/index'                   => ['cid' => $nid],
            'bulletin/operation/category_view' => ['cid' => $nid],
        ];
        $utility->setSitePosition($t, $page_path);
    }
} else {
    cb_throw_error(E_GRN_BULLETIN_CATEGORY_NOT_FOUND);
}
unset($nid);

$t->display(cb_get_pagename() . ".tpl");

