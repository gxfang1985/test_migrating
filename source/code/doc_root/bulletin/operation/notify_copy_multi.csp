<?php
global $G_INPUT;
// Smarty をインスタンス化
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

require_once('bulletin/controller.csp');
$utility = new GRN_Bulletin_ControllerUtil();

// --- start: category tree
include('../_copy_multi_tree.csp');
// --- end: category tree

// --- start: notify info
include('../_notify_list.csp');
// --- end: notify info

if ($G_INPUT['cid'] && $G_INPUT['cid'] != 1) {
    $utility->prepareMakeSitePosition(
        $t, $G_INPUT['cid'], null, $G_INPUT['cid'], null, null, null,
        $G_INPUT['cid']
    );
} else {
    $page_path = [
        'bulletin/index'                   => ['cid' => '1'],
        'bulletin/operation/category_view' => ['cid' => '1'],
        'bulletin/operation/notify_list'   => ['nid' => '1'],
    ];

    $utility->setSitePosition($t, $page_path);
}

$t->display(cb_get_pagename() . ".tpl");

