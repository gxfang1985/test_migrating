<?php

require_once("grn/smarty.csp");
$t = new GRN_Smarty;

$node_id = cb_at($G_INPUT, 'nid');
$node_row = $G_bulletin->getCategory($G_bulletin_login, $node_id);
if ( ! $node_row) {
    cb_throw_error(E_GRN_BULLETIN_CATEGORY_NOT_FOUND);
}

$node = [];
$node['name'] = $node_row->get('name');

$t->assign('node_id', $node_id);
$t->assign('node', $node);

$eid = cb_at($G_INPUT, 'eid');
$t->assign('eid', $eid);
$t->assign('count', is_array($eid) ? count($eid) : 0);

require_once('bulletin/controller.csp');
$utility = new GRN_Bulletin_ControllerUtil();
$utility->prepareMakeSitePosition(
    $t, $node_id, null, $node_id, null, null, null, null, null, null, null,
    null, null, null, null, null, $node_id
);

$t->display(cb_get_pagename() . ".tpl");

