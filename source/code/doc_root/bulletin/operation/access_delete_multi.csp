<?php

global $G_INPUT;

// Smarty をインスタンス化
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

require_once('../_access_delete_multi.csp');

require_once('bulletin/controller.csp');
$utility = new GRN_Bulletin_ControllerUtil();

// GRN35-209
if (@$G_INPUT['nid']) {
    $utility->prepareMakeSitePosition($t, @$G_INPUT['nid'], null,
        @$G_INPUT['nid'], null, @$G_INPUT['nid'], $G_INPUT['poid']);
} else {
    $page_path = [
        'bulletin/index'                   => ['cid' => $G_INPUT['nid']],
        'bulletin/operation/category_view' => ['cid' => $G_INPUT['nid']],
        'bulletin/operation/access_list'   => [
            'nid'  => $G_INPUT['nid'],
            'poid' => @$G_INPUT['poid']
        ],
    ];

    $utility->setSitePosition($t, $page_path);
}
// GRN35-209

$t->display(cb_get_pagename() . ".tpl");

