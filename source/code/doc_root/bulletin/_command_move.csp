<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;

    if ( ! array_key_exists('aid', $G_INPUT)) {
        cb_throw_error(E_GRN_BULLETIN_ARTICLE_NOT_FOUND);
    }
    if ( ! array_key_exists('s_cid', $G_INPUT)) {
        cb_throw_error(E_GRN_BULLETIN_CATEGORY_NOT_FOUND);
    }

    $article_id = $G_INPUT['aid'];
    $set_category_id = $G_INPUT['s_cid'];

    if ( ! ($article =& $G_bulletin->getArticle($G_bulletin_login,
        $article_id))
    ) {
        cb_throw_error(E_GRN_BULLETIN_ARTICLE_NOT_FOUND);
    }

    if ( ! ($category =& $G_bulletin->getCategory($G_bulletin_login,
        $set_category_id))
    ) {
        cb_throw_error(E_GRN_BULLETIN_CATEGORY_NOT_FOUND);
    }

    $article->setCategory($G_bulletin_login, $category);

}
