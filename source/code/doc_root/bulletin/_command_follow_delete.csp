<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;

    if ( ! ($article_id = @ $G_INPUT['aid'])) {
        cb_throw_error(E_GRN_BULLETIN_ARTICLE_NOT_FOUND);
    }
    if ( ! ($follow_id = @ $G_INPUT['follow_id'])) {
        cb_throw_error(E_GRN_BULLETIN_FOLLOW_NOT_FOUND);
    }

    $follow_id = $G_INPUT['follow_id'];

    global $G_container_base;
    $uum =& $G_container_base->getInstance('uum');
    $login =& $uum->getLoginUser();

    if ( ! ($article =& $G_bulletin->getArticle($login, $article_id))) {
        cb_throw_error(E_GRN_BULLETIN_ARTICLE_NOT_FOUND);
    }

    if ( ! ($follow =& $article->getFollow($follow_id))) {
        cb_throw_error(E_GRN_BULLETIN_FOLLOW_NOT_FOUND);
    }

    $follow->delete($G_bulletin_login);
}

