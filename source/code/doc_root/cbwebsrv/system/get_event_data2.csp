<?php

//-- instantiate smarty object
require_once('grn/smarty.csp');
$t = new GRN_Smarty();

// site position
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);
$t->assign('site_position', [
    [
        'page' => '',
        'name' => $page_title
    ]
]);

if (is_array(@ $G_INPUT)) {
    $event_ids = [];
    foreach ($G_INPUT as $key => $event_id) {
        $pos = @ mb_strpos($key, 'event_id_');
        if (is_int($pos)) {
            if ($pos == 0) {
                $event_ids[] = $event_id;
            }
        }
    }

    $t->assign('event_ids', $event_ids);
}

// Smarty実行
$doc_name = cb_get_pagename();
$t->display("{$doc_name}.tpl");

