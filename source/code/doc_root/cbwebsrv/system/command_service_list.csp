<?php

require_once('cbwebsrv/system_logic.csp');
$system_logic = GRN_CBWebSrv_SystemLogic::getInstance();

require_once('cbwebsrv/tool_define.csp');
$service_list = [
    GRN_CBWEBSRV_SERVICE_ROUTE,
    GRN_CBWEBSRV_SERVICE_WEATHER,
    GRN_CBWEBSRV_SERVICE_SIXKINDSOFDAY
];

foreach ($service_list as $service_id) {
    $is_avaiable = '0';
    if (is_array(@ $G_INPUT['srv_ids'])) {
        if (in_array($service_id, $G_INPUT['srv_ids'])) {
            $is_avaiable = '1';
        }
    }

    $ret = $system_logic->setServiceAvailabilityAttribute($service_id,
        $is_avaiable);

    if ( ! $ret) {
        require_once('cbwebsrv/error_code.csp');
        cb_throw_error(E_GRN_CBWEBSRV_FAIL_TO_UPDATE_SYSTEM_PROFILE);
    }
}
cb_redirect('system/application_list', ['app_id' => 'cbwebsrv']);


