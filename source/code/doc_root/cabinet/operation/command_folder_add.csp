<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;

    $target_name = 'cabinet/operation/folder_add';

    require_once('../_command_folder_add.csp');

    if (@ $success) {
        require_once('cabinet/access.csp');
        $acc = GRN_Cabinet_AccessManager::getInstance();

        if ($acc->getSecurityModel($folder)
            == GRN_CABINET_SECURITY_MODEL_GRANT
        ) {
            $acc->addTarget($folder, $G_cabinet_login,
                ['read' => 1, 'write' => 1]);
        }

        cb_redirect('cabinet/index', ['hid' => $G_INPUT['hid']]);
    } else {
        require_once('cabinet/controller.csp');
        $utility = new GRN_Cabinet_ControllerUtil();

        $page_path = [
            'cabinet/index' => ['hid' => $G_INPUT['hid']],
        ];

        $utility->setSitePosition($t, $page_path);

        $t->display($target_name . '.tpl');
    }
}
