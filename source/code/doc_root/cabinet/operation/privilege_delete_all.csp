<?php

require_once("grn/smarty.csp");
$t = new GRN_Smarty;

//--node information
$node_id = cb_at($G_INPUT, 'nid');
$node_row = $G_cabinet->getFolder($G_cabinet_login, $node_id);
if ( ! $node_id || ! $node_row) {
    cb_throw_error(E_GRN_CABINET_FOLDER_NOT_FOUND);
}

$node = [];
$node['name'] = $node_row->get('name');
$t->assign('node_id', $node_id);
$t->assign('node', $node);

//--page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

require_once('cabinet/controller.csp');
$utility = new GRN_Cabinet_ControllerUtil();
$utility->prepareMakeSitePosition($t, $node_id, null, $node_id, null, null,
    null, null, $node_id);

$t->display(cb_get_pagename() . ".tpl");

