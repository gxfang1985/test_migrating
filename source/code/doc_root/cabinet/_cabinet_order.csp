<?php

global $G_INPUT;

if ( ! isset($t) || ! is_a($t, 'GRN_Smarty')) {
    require_once('grn/smarty.csp');
    $t = new GRN_Smarty();
}

if ( ! array_key_exists('hid', $G_INPUT)) {
    cb_throw_error(E_GRN_CABINET_FOLDER_NOT_FOUND);
}
$folder_id = $G_INPUT['hid'];

if ( ! ($folder = $G_cabinet->getFolder($G_cabinet_login, $folder_id))) {
    cb_throw_error(E_GRN_CABINET_FOLDER_NOT_FOUND);
}

//get cabinet display order
$order_array = $folder->getCabinetDisplayOrder();

$item_options = [
    [
        'value'    => 1,
        'label'    => cb_msg('grn.cabinet', 'cabinet_order_by_subject'),
        'selected' => $order_array['orderby'] == '1',
    ],
    [
        'value'    => 2,
        'label'    => cb_msg('grn.cabinet', 'cabinet_order_by_filename'),
        'selected' => $order_array['orderby'] == '2',
    ],
    [
        'value'    => 3,
        'label'    => cb_msg('grn.cabinet', 'cabinet_order_by_updatedtime'),
        'selected' => $order_array['orderby'] == '3',
    ]
];

$t->assign('item_options', $item_options);

$t->assign('folder_id', $folder_id);

$t->assign('folder_name', $folder->get('name'));

$t->assign('order_setting', $order_array);

