<?php

global $G_INPUT;

require_once("grn/smarty.csp");
$t = new GRN_Smarty;

require_once('cabinet/controller.csp');
$utility = new GRN_Cabinet_ControllerUtil();

$utility->setSitePosition($t, null);

require_once('cabinet/config.csp');
$config = GRN_Cabinet_SystemConfig::getInstance();

$t->assign('trash_period', $config->getTrashPeriod());
$trash_period_list = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
$t->assign('trash_period_list', $trash_period_list);

//一括ダウンロード
$max_zip_sizes = [
    '5120'   => '5MB',
    '10240'  => '10MB',
    '30720'  => '30MB',
    '51200'  => '50MB',
    '102400' => '100MB',
    '307200' => '300MB',
    '-1'     => cb_msg('grn.system', 'separator'),
    '0'      => cb_msg('grn.system', 'infinity')
];

$max_zip_size = $config->getBundleDownloadMaxSize();
$bundle_download_options = [];
foreach ($max_zip_sizes as $value => $label) {
    $selected = false;
    if ($value == $max_zip_size) {
        $selected = true;
    }
    $bundle_download_options[] = [
        'label'    => $label,
        'value'    => $value,
        'selected' => $selected
    ];
}

$bundle_download = [
    'name'    => 'bundle_download',
    'options' => $bundle_download_options
];

$t->assign('bundle_download', $bundle_download);
$t->display(cb_get_pagename() . ".tpl");

