<?php

global $G_INPUT;

require_once("grn/smarty.csp");
$t = new GRN_Smarty;

if ( ! array_key_exists('hid', $G_INPUT)) {
    cb_throw_error(E_GRN_CABINET_FOLDER_NOT_FOUND);
}
$folder_id = $G_INPUT['hid'];

if ( ! ($folder =& $G_cabinet->getFolder($G_cabinet_login, $folder_id))) {
    cb_throw_error(E_GRN_CABINET_FOLDER_NOT_FOUND);
}
if ($folder->checkDeletedFlag(true, true)) {
    cb_throw_error(E_GRN_CABINET_CANNOT_RESTORE_FOLDER);
}

$folder_for_view = [
    'hid'  => $folder->getOID(),
    'name' => $folder->get('name')
];

$t->assign('folder', $folder_for_view);

require_once('cabinet/controller.csp');
$utility = new GRN_Cabinet_ControllerUtil();

$page_path = [
    'cabinet/system/folder_list' => ['hid' => $G_INPUT['hid']],
];

$utility->setSitePosition($t, $page_path);

$t->display(cb_get_pagename() . ".tpl");
