<?php

require_once("grn/smarty.csp");
$t = new GRN_Smarty;

//--node information
$node_id = cb_at($G_INPUT, 'nid');
$node_row = $G_cabinet->getFolder($G_cabinet_login, $node_id);
if ( ! $node_id || ! $node_row) {
    cb_throw_error(E_GRN_CABINET_FOLDER_NOT_FOUND);
}

$node = [];
$node['name'] = $node_row->get('name');
$t->assign('node_id', $node_id);
$t->assign('node', $node);

//--page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

//--site position 
$site_position = [
    [
        'page' => 'cabinet/system/privilege_index',
        'name' => grn_get_page_display_name('cabinet/system/privilege_index'),
        'nid'  => $node_id
    ],
    [
        'page' => 'cabinet/system/privilege_list',
        'name' => grn_get_page_display_name('cabinet/system/privilege_list'),
        'nid'  => $node_id
    ],
    ['page' => '', 'name' => $page_title],
];
$t->assign('site_position', $site_position);

$t->display(cb_get_pagename() . ".tpl");

