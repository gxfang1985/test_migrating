<?php

global $G_INPUT;

require_once("grn/smarty.csp");
$t = new GRN_Smarty;


if ( ! ($folder_id = @ $G_INPUT['hid'])) {
    cb_throw_error(E_GRN_CABINET_FOLDER_NOT_FOUND);
}
if ( ! ($folder =& $G_cabinet->getFolder($G_cabinet_login, $folder_id))) {
    cb_throw_error(E_GRN_CABINET_FOLDER_NOT_FOUND);
}

require_once('cabinet/controller.csp');
$utility = new GRN_Cabinet_ControllerUtil();

$page_path = [
    'cabinet/system/folder_list' => [],
    'cabinet/system/garbage'     => ['hid' => $folder_id]
];

$utility->setSitePosition($t, $page_path);

$utility = new GRN_Cabinet_ControllerUtil('cabinet/system/folder_list');
$session =& $utility->getSession();

$eid = $session->get('eid');

$t->assign('folder_id', $folder_id);
$t->assign('folder_name', $folder->get('name'));
$t->assign('delete_numbers', count($eid));
$t->assign('eid', $eid);
$t->display(cb_get_pagename() . ".tpl");

