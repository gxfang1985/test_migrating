<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;

    if ( ! array_key_exists('hid', $G_INPUT)) {
        cb_throw_error(E_GRN_CABINET_FOLDER_NOT_FOUND);
    }
    $folder_id = $G_INPUT['hid'];

    if ( ! array_key_exists('eid', $G_INPUT) || ! is_array($G_INPUT['eid'])) {
        cb_redirect('cabinet/index', ['hid' => $folder_id]);
    }

    require_once('cabinet/controller.csp');
    $utility = new GRN_Cabinet_ControllerUtil('cabinet/index');

    $session =& $utility->getSession();
    $session->set('eid', $G_INPUT['eid']);
    if (@$G_INPUT['cmd'] == 'delete') {
        cb_redirect('cabinet/delete_multi', ['hid' => $folder_id]);
    } else {
        cb_redirect('cabinet/move_multi', ['hid' => $folder_id]);
    }
}

