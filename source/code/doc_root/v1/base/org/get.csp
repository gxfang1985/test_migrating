<?php
require_once dirname(dirname(__DIR__)) . '/_api.csp';

$in = JSON::getInput();
if ( ! isset($in->id)) {
    throw new APIException('Parameter:id is not specified.', 201);
}

global $G_container_base;
$uum = $G_container_base->getInstance('uum');

if ( ! is_numeric($in->id)) {
    throw new APIException('Parameter:id is invalid.', 202);
}

$group = $uum->getGroup($in->id);
if ( ! $group || ! is_object($group)) {
    throw new APIException('Specified group is not found.', 301);
}

$row = new stdClass();
$row->id = $group->getOID();
$row->name = $group->get('name');
$parent = $group->get('parent');
$row->parentId = is_object($parent) ? intval($parent->getOID()) : null;

$result = new stdClass();
$result->success = true;
$result->row = $row;
echo json_encode($result);
