<?php
/**
 * 個人設定 V-CUBEシステム用メールアドレス設定
 *
 * @create:
 *    2011/06/08 VCBSCH0010 Sync for V-CUBE
 */

// Smarty をインスタンス化
require_once("grn/smarty.csp");
$t = new GRN_Smarty;
// for site position
$t->assign('app_id', 'schedule');

//------------------
global $G_container_base;
$uum = $G_container_base->getInstance('uum');
$login = $uum->getLoginUser();

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);
// site position 
$t->assign('site_position', [['page' => '', 'name' => $page_title]]);

$mail_set = [];

require_once('schedule/netmeeting_personal_logic.csp');
$personal_logic = GRN_Netmeeting_PersonalLogic::getInstance();

$mail_set['mail'] = [
    'address' => $login->get('email_address'),
    'other'   => $personal_logic->getForwardMailAddress($login),
    'value'   => $personal_logic->getForwardMailType($login),
];

$t->assign('set', $mail_set);

// Smarty実行
$doc_name = cb_get_pagename();
$t->display("{$doc_name}.tpl");

