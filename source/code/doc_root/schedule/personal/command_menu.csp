<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    $menus = @ $G_INPUT['menu'];

    global $G_container_base;
    $uum = $G_container_base->getInstance('uum');
    $login = $uum->getLoginUser();

    require_once('schedule/personal_logic.csp');
    $logic = GRN_Schedule_PersonalLogic::getInstance();
    $logic->setMenus($login, $menus);

    // 監査ログ
    require_once('grn/logger.csp');
    $lm = CB_LoggerManager::getInstance();
    $l = $lm->getLogger(GRN_SCHEDULE_MODULE_ID);
    $log_params = [];
    $l->noticeEx('config', 'personal_menu', $log_params);
}

cb_redirect('personal/application_list', ['app_id' => 'schedule']);

