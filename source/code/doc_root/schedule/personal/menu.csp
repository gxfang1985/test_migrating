<?php

// Smarty をインスタンス化
require_once("grn/smarty.csp");
$t = new GRN_Smarty;
// for site position
$t->assign('app_id', 'schedule');

//------------------
global $G_container_base;
$uum = $G_container_base->getInstance('uum');
$login = $uum->getLoginUser();

require_once("schedule/personal_logic.csp");
$logic = GRN_Schedule_PersonalLogic::getInstance();
$menus = $logic->getMenus($login);    // 配列にメニュー

$str_menu = '';
foreach ($menus as $menu) {
    $str_menu .= $menu . "\r\n";
}

$t->assign('menus', $str_menu);

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);
// site position 
$t->assign('site_position', [['page' => '', 'name' => $page_title]]);

// Smarty実行
$doc_name = cb_get_pagename();
$t->display("{$doc_name}.tpl");

