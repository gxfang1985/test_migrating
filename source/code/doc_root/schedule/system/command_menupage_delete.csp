<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    /*
        // instantiate an Smarty object
        require_once( "grn/smarty.csp" );
        $t = new GRN_Smarty;

        // Validation check
        require_once('SmartyValidate.class.php');
        SmartyValidate::connect($t);

        // validate after a POST
        if(SmartyValidate::is_valid($G_INPUT)) {
            // the validation session is finished
            SmartyValidate::disconnect();
    */
    // --------
    // brabrabra after success
    // --------
    require_once('schedule/system_logic.csp');
    $logic = GRN_Schedule_SystemLogic::getInstance();

    $menupage_id = $G_INPUT['menupageid'];

    if (($menupage = $logic->getMenuPage($menupage_id)) == false) {
        cb_throw_error(E_GRN_SCHD_NOT_FOUND_MENU);
    }

    $logic->deleteMenuPage($menupage_id);

    cb_redirect('schedule/system/menupage_list', ['sf' => '1']);
    /*
        } else {
            // if error, show the source form

            //Assign Template Name
            $t->setPageInfo($target_name);

            cb_redirect( 'schedule/system/menupage_delete', array( 'menupageid'=>$G_INTPU['menupage_id'] ) );
        }
    */
}
