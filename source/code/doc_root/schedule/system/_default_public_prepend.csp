<?php

// get parameters from URL parameters
global $G_INPUT;
$org_id = cb_at($G_INPUT, "oid");// organization id
$user_id = cb_at($G_INPUT, "uid");// user id
$eid = cb_at($G_INPUT, 'eid');// checked id list
$order = cb_at($G_INPUT, 'order');// item order list

// prepare instance
$uum = cb_lwc_uum();
$login = $uum->getLoginUser();
$object = $uum->getUser($user_id);

if ( ! ($login && $object)) {
    cb_throw_error(E_GRN_USER_NOT_FOUND);
}

$login_id = $login->getOID();
$ous_params = ["oid" => $org_id, "uid" => $user_id];

// instantiate smarty object
require_once("grn/smarty.csp");
$smarty = new GRN_Smarty();

$smarty->assign("org_id", $org_id);
$smarty->assign("user_id", $user_id);
$smarty->assign("ous_params", $ous_params);
$smarty->assign('eid', $eid);
$smarty->assign('count', is_array($eid) ? count($eid) : 0);

// page title
$page_title = grn_get_current_page_display_name();
$smarty->assign("page_title", $page_title);
