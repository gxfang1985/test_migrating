<?php

use grn\grn\MemberLogic;
use grn\schedule\ScheduleDefaultPublicLogic;

include("_default_public_prepend.csp");

$default_public_list = ScheduleDefaultPublicLogic::getInstance()
                                                 ->getDefaultPublicByUserId($user_id,
                                                     null, false, false);
$smarty->assign("default_public_list", $default_public_list);

$user_ids = [];
foreach ($default_public_list as $default_public) {
    if ($default_public[MemberLogic::MEMBER_TYPE] == MemberLogic::TYPE_USER) {
        $user_ids[] = $default_public[MemberLogic::MEMBER_ID];
    }
}
require_once("grn/controller.csp");
$users_info = GRN_ControllerUtil::getUserInfoToShowUserName($user_ids, $login);
$smarty->assign("users_info", $users_info);

// site position 
$site_position = [];
$site_position[] = [
    "page" => "schedule/system/default_public_index"
    ,
    "name" => grn_get_page_display_name("schedule/system/default_public_index")
    ,
    "oid"  => $org_id
];
$site_position[] = [
    "page" => ""
    ,
    "name" => $page_title
];
$smarty->assign("site_position", $site_position);

// display smarty
$smarty->display(cb_get_pagename() . ".tpl");
