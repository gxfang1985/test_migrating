<?php
if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_container_base;
    $uum = $G_container_base->getInstance('uum');
    $login = $uum->getLoginUser();

    global $G_INPUT;
    require_once('schedule/personal_logic.csp');
    $personallogic = GRN_Schedule_PersonalLogic::getInstance();

    if (isset($G_INPUT['confirm']) && $G_INPUT['confirm']) {
        $status = (isset($G_INPUT['member_tz']) && $G_INPUT['member_tz'] > 0)
            ? 1 : 0;
        $page = 'confirm';
        $personallogic->setShowUsersTimezone($login, $status, $page);
    } else {
        $member_tz = @$G_INPUT['member_tz'];
        $personallogic->setDisplayMemberTimezone($login, $member_tz);
    }
}
