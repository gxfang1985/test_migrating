<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    require_once('_access_util.csp');

    // access object
    $object = grn_get_schedule_access_object($target, $org_id, $user_id,
        $role_id, $facility_id, $fgroup_id);

    // access information
    require_once('schedule/access_logic.csp');
    $sal = GRN_Schedule_Access_Logic::getInstance();
    $current_model = $sal->getSecurityModel($object);
    $security_model = @ $G_INPUT['security_model'];
    $params = $G_INPUT;
    if ($security_model == $current_model) {
        // not modified
        unset($params['security_model']);
        cb_redirect('schedule/operation/access_list', $params);
    } else {
        // to confirm modifing
        cb_redirect('schedule/operation/access_model_modify2', $params);
    }
}

