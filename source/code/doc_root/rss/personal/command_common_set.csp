<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    require_once('rss/resources.csp');
    require_once('rss/personal.csp');
    $personal = GRN_RSS_PersonalLogic::getInstance();

    // set "open other window" attribute
    if (array_key_exists('blank', $G_INPUT)) {
        $personal->setOpenOtherWindowAttribute($G_rss_login, '1');
    } else {
        $personal->setOpenOtherWindowAttribute($G_rss_login, '0');
    }

    // set "use shared" attribute
    if (array_key_exists('shared', $G_INPUT)) {
        $use_shared = '1';
        $personal->setUseSharedAttribute($G_rss_login, $use_shared);
    } else {
        $use_shared = '0';
        $personal->setUseSharedAttribute($G_rss_login, $use_shared);
    }
    // log
    require_once('rss/inspection.csp');
    $inspection = GRN_Rss_Inspection::getInstance();
    if ($inspection->isEnabled()) {
        $inspection->writeInspectionLogNotice('config', 'personal_rss',
            ['use_shared' => $use_shared, 'uid' => $G_rss_login->getOID()]);
    }
}

cb_redirect('personal/application_list', ['app_id' => 'rss']);


