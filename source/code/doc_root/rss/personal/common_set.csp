<?php
//-- instantiate Smarty object
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);
$t->assign('site_position', [['page' => '', 'name' => $page_title]]);

require_once('fw/i18n.csp');
require_once('rss/resources.csp');
require_once('rss/personal.csp');
$personal = GRN_RSS_PersonalLogic::getInstance();

$items_for_view = [
    'blank' => [
        'display_name' => cb_msg(GRN_RSS_APP_MODULEID, 'window'),
        'type'         => 'checkbox',
        'caption'      => cb_msg(GRN_RSS_APP_MODULEID, 'window_caption'),
        'value'        => '1',
        'checked'      => $personal->getOpenOtherWindowAttribute($G_rss_login),
    ]
];

require_once('rss/system.csp');
$system = GRN_RSS_SystemLogic::getInstance();
if (strcmp($system->getUseSharedAttribute(), '0') === 0) {
    $items_for_view['shared'] = [
        'display_name' => cb_msg(GRN_RSS_APP_MODULEID, 'shared_site'),
        'type'         => 'checkbox',
        'caption'      => cb_msg(GRN_RSS_APP_MODULEID, 'shared_site_caption'),
        'value'        => '1',
        'checked'      => $personal->getUseSharedAttribute($G_rss_login),
    ];
}

$form_for_view = [
    'items'   => $items_for_view,
    'buttons' => [
        'submit' => [
            'display_name' => cb_msg('fw/common', 'save'),
            'type'         => 'submit',
        ],
        'cancel' => [
            'type' => 'cancel',
        ],
    ],
];
$t->assign('form', $form_for_view);

//-- show page
$t->display(cb_get_pagename() . ".tpl");

