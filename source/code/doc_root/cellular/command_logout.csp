<?php
if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_container_base;
    $uum = $G_container_base->getInstance('uum');
    $login = $uum->getLoginUser();

    require_once("cellular/token.csp");
    $cellular_token = new GRN_Cellular_Token();
    $cellular_token->remove($login->getOID());
    setcookie("token_id_cellular", "", time() - 60, "/", "", 0);
    $uum->logout();

    require_once("fw/session_manager.csp");
    CB_SessionManager::getInstance()->destroy();
// fw/plugin/uum/logout/clear_session.cspでは、すべてのSessionを破棄するわけではない
// cellularはすべてのSessionを破棄しているが意図は不明
// すべてのSessionを破棄できることがわかったら、fw/plugin/uum/logout/clear_session.cspでSessionを全て破棄して、処理を集約するのが望ましい
}
grn_cellular_redirect('cellular/index');
