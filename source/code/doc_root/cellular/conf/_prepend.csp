<?php

require_once('cellular/prepend.csp');

// 携帯用initialize
global $G_state_set;
$G_state_set->set('copyright_should_be_written', false);

require_once('grn/application.csp');
$locator = GRN_ApplicationLocator::instance();
global $G_cellular;
$G_cellular =& $locator->getInstance('cellular');
unset($locator);

// LoginUser
global $G_container_base;
$uum =& $G_container_base->getInstance('uum');
global $G_cellular_login;
$G_cellular_login =& $uum->getLoginUser();
unset($uum);

if (is_a($G_cellular_login, "CB_User")) {
    require_once('cellular/config.csp');
    $uc = new GRN_Cellular_UserConfig($G_cellular_login);
    if ( ! $uc->getAvailability()) {
        require_once('cellular/error_code.csp');
        cb_throw_error(E_GRN_CELLULAR_UNDER_SUSPENSION);
    }
    unset($uc);
}


