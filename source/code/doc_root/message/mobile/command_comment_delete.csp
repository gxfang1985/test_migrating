<?php

use grn\grn\mobile\MobileScreenCommon;
use grn\message\screen\mobile\MessageCommentDelete;
use grn\grn\JSONResponse;

if (strcasecmp(@$_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;
    $screen = new MobileScreenCommon(new MessageCommentDelete($G_INPUT));

    global $G_state_set;
    $G_state_set->set('error_page_type', 'json');

    $screen->post($G_INPUT);

    $json = JSONResponse::create();
    $json->response([
        'redirect' => cb_format_url('message/mobile/view', [
            'cid' => cb_at($G_INPUT, 'cid'),
            'rid' => cb_at($G_INPUT, 'rid'),
            'mid' => cb_at($G_INPUT, 'mid')
        ], 'comment_top')
    ]);
}
