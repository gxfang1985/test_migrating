<?php

// Smarty をインスタンス化
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

// page title
// サイトポジション
//$page_title = "メッセージの一括削除";
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);
$t->assign(
    'site_position', [
        [
            'page' => "",
            'name' => $page_title
        ]
    ]
);

require_once('grn/application.csp');
$locator = GRN_ApplicationLocator::instance();
if ( ! ($message = $locator->getInstance('message'))) {
    require_once('message/error_code.csp');
    $name = $locator->getName('message');
    $name = htmlspecialchars($name);
    cb_throw_error(E_GRN_MESSAGE_DEACTIVATED,
        ['app_name' => $name], ['app_name' => $name]);
}
$t->assign('app_name', $message->getName());

$current_date = getdate();
$date = new CB_Date();
$date->year = $current_date['year'];
$date->month = $current_date['mon'];
$date->day = $current_date['mday'];

require_once('fw/date.csp');
$date_for_view = new CB_DateEx($date);
$date_for_view->moveYears(-1);

$t->assign('date', $date_for_view);

// Smarty実行
$doc_name = cb_get_pagename();
$t->display("{$doc_name}.tpl");

