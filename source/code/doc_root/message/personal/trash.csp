<?php

//-- instantiate Smarty object
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

//------------------

// application object
require_once('grn/application.csp');
$locator = GRN_ApplicationLocator::instance();

$message = null;
if ( ! ($message = $locator->getInstance('message'))) {
    require_once('message/error_code.csp');
    $name = $locator->getName('message');
    $name = htmlspecialchars($name);
    cb_throw_error(E_GRN_MESSAGE_DEACTIVATED,
        ['app_name' => $name], ['app_name' => $name]);
}
$message_name = $message->getName();
$t->assign('app_name', $message_name);

// get user
global $G_container_base;
$uum = $G_container_base->getInstance('uum');
$user = $uum->getLoginUser();

if ( ! $user) {
    require_once('grn/error_code.csp');
    cb_throw_error(E_GRN_USER_NOT_FOUND);
}

// get personal configurations
require_once('message/personal_logic.csp');
$personal_logic = GRN_Message_PersonalLogic::getInstance();
$use_garbagebox = $personal_logic->getUseGarbageBoxAttribute($user);
$stored_term = $personal_logic->getStoredTermAttribute($user);

$t->assign('selected', ['use' => $use_garbagebox, 'set_day' => $stored_term]);

/*
// selected data
$t->assign(
    'selected',array(
        'use' => 1, //use trash
        'set_day' => 3, //delete day
    )
);
 */

// select menu setting
$t->assign(
    'select1', [
        'name'    => 'set_day',
        'options' => [
            1,
            2,
            3,
            4,
            5,
            6,
            7,
            8,
            9,
            10
        ],
        'padding' => '&nbsp;',
    ]
);

// page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

// site position
$t->assign('site_position', [['page' => '', 'name' => $page_title]]);

//-- show page
$t->display(cb_get_pagename() . ".tpl");


