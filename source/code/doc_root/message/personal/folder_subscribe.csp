<?php

// Smarty をインスタンス化
require_once("grn/smarty.csp");
$t = new GRN_Smarty;

//------------------

$category_id = @ $G_INPUT['cid'];
$t->assign('cid', $category_id);

//------------------

$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

require_once('grn/application.csp');
$locator = GRN_ApplicationLocator::instance();
if ( ! ($message = $locator->getInstance('message'))) {
    require_once('message/error_code.csp');
    $name = $locator->getName('message');
    $name = htmlspecialchars($name);
    cb_throw_error(E_GRN_MESSAGE_DEACTIVATED,
        ['app_name' => $name], ['app_name' => $name]);
}
$t->assign('app_name', $message->getName());

$t->assign(
    'site_position',
    [
        [
            'page' => "",
            'name' => $page_title
        ]
    ]
);

// Smarty実行
$doc_name = cb_get_pagename();
$t->display("{$doc_name}.tpl");

