<?php

if (strcasecmp(@ $_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    $filters = @ $G_INPUT['order'];
    if (is_array($filters)) {
        $_filters = [];
        foreach ($filters as $key => $filter) {
            $_filters[$filter] = $key;
        }

        require_once('message/personal_logic.csp');
        $personal_logic = GRN_Message_PersonalLogic::getInstance();
        $ret = $personal_logic->changeFilterOrder($_filters);
        if ( ! $ret) {
            require_once('message/error_code.csp');
            cb_throw_error(E_GRN_MESSAGE_FILTER_NOT_FOUND);
        }
    }
}

cb_redirect('message/personal/filter');

