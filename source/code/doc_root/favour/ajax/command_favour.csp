<?php

use grn\grn\JSONResponse;
use grn\favour\screen\FavourScreen;

if (strcasecmp(@$_SERVER['REQUEST_METHOD'], 'POST') == 0) {
    global $G_INPUT;
    global $G_state_set;

    $G_state_set->set('html_should_be_closed', false);
    $G_state_set->set('copyright_should_be_written', false);
    $G_state_set->set('error_page_type', 'json');

    $favour = new FavourScreen($G_INPUT);
    $favour->post();
    $json = JSONResponse::create();
    $json->response([
        'count'   => $favour->getCount(),
        'f_word'  => $favour->fetchFavourWord(),
        'f_count' => $favour->fetchFavourCount()
    ]);
}
