<?php

use grn\grn\JSONResponse;

global $G_INPUT;
global $G_state_set;
$G_state_set->set('html_should_be_closed', false);
$G_state_set->set('copyright_should_be_written', false);
$G_state_set->set('error_page_type', 'json');

if ( ! isset($t) || ! is_a($t, 'GRN_Smarty')) {
    // Smarty をインスタンス化
    require_once("grn/smarty.csp");
    $t = new GRN_Smarty;
}

$content = $t->fetch(cb_get_pagename() . ".tpl");
$json = JSONResponse::create();
$json->response(['content' => $content]);
