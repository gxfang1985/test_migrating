<?php

global $G_INPUT;
global $G_container_base;
$uum = $G_container_base->getInstance('uum');

global $G_state_set;
$G_state_set->set('copyright_should_be_written', false);
$G_state_set->set('html_should_be_closed', false);
$G_state_set->set('error_page_type', 'json');

$login =& $uum->getLoginUser();
if ($login === false) {
    cb_throw_error(E_GRN_USER_NOT_FOUND);
}

$isExpanded = null;
if (isset($G_INPUT['stateApplication'])) {
    $isExpanded = $G_INPUT['stateApplication'];
}

require_once("grn/appmenu_state_last_access.csp");
$value = grn_appmenu_set_state_last_access($login, $isExpanded);

return;
