<?php

global $G_INPUT;

require_once("grn/smarty.csp");
$t = new GRN_Smarty;

//Set Application Name
global $G_link_app_name;
$t->assign('app_name', $G_link_app_name);

require_once('_access_util.csp');

//--access information
$node_id = @ $G_INPUT['nid'];

//Get Security Model
$access = [];
require_once('link/access_logic.csp');
$category_acccess_logic = GRN_Link_Category_Access_Logic::getInstance();
$access['security_model'] = $category_acccess_logic->getSecurityModel($node_id);

//Assign Smarty Variabale
$t->assign('access', $access);
$t->assign('is_grant', $access['security_model'] == 'grant');
$t->assign('is_revoke', $access['security_model'] == 'revoke');

//page title
$page_title = grn_get_current_page_display_name();
$t->assign('page_title', $page_title);

//site position 
$t->assign('site_position', [
        [
            'page' => 'link/system/access_index',
            'name' => grn_get_page_display_name('link/system/access_index'),
            'nid'  => $node_id
        ],
        [
            'page' => 'link/system/access_list',
            'name' => grn_get_page_display_name('link/system/access_list'),
            'nid'  => $node_id,
            'poid' => $poid
        ],
        ['page' => '', 'name' => $page_title],
    ]
);

//Display Smarty Template
$doc_name = cb_get_pagename();
$t->display("{$doc_name}.tpl");


