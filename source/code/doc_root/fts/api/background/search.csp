<?php

use grn\fts\api\SearchApi;
use grn\fts\Application;

global $G_state_set;
$G_state_set->set('error_page_type', 'json');
$G_state_set->set('copyright_should_be_written', false);
$G_state_set->set('html_should_be_closed', false);

if (Application::isBackgroundSearchModeEnabled()) {
    $searchApi = new SearchApi();
    $searchApi->run(true);
} else {
    header('Content-Type: application/json;charset=UTF-8');
    echo json_encode(['success' => false]);
}
