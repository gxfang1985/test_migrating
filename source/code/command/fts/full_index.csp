<?php

use grn\fts\FullIndexerFactory;
use grn\fts\Application;

if ( ! Application::isAvailable()) {
    cb_throw_error(E_GRN_APPLICATION_NOT_AVAILABLE);
}

// disable output buffering for command-line
while (ob_get_level() > 0) {
    ob_end_clean();
}
// enable automatic flushing upon every 'echo'.
ob_implicit_flush();

global $G_INPUT;

$factory = new FullIndexerFactory($G_INPUT);
$indexer = $factory->createFullIndexer();
$indexer->execute();
