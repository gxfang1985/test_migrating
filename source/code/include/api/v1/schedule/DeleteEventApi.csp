<?php
declare(strict_types=1);

namespace grn\api\v1\schedule;

use grn\api\RestApi;
use grn\api\ResponseEntity;
use grn\api\http\response\Record;
use grn\api\http\HttpStatus;
use grn\schedule\api\adapter\events\DeleteEventRestAdapter;
use grn\schedule\api\service\EventsService;

class DeleteEventApi extends RestApi
{
    /**
     * @param array $params
     *
     * @return ResponseEntity
     */
    public function execute(array $params): ResponseEntity
    {
        $login = cb_get_login_user();
        $event_id = $params['id'];

        $events_service = new EventsService();
        $events_service->deleteEvent($login, $event_id,
            new DeleteEventRestAdapter());
        $body = null;

        $http_status = new HttpStatus(HttpStatus::NO_CONTENT);
        $response_entity = new ResponseEntity(new Record($body), $http_status);

        return $response_entity;
    }

}
