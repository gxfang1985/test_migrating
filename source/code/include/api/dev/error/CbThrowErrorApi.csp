<?php
declare(strict_types=1);

namespace grn\api\dev\error;

use grn\api\http\HttpStatus;
use grn\api\http\response\Record;
use grn\api\ResponseEntity;
use grn\api\RestApi;

class CbThrowErrorApi extends RestApi
{
    public function execute(array $params): ResponseEntity
    {
        $input = $this->getInput();
        $message = $input["message"] ?? null;
        $cause = $input["cause"] ?? null;
        $counter = $input["counter"] ?? null;
        $developer = $input["developer"] ?? null;

        $is_throw_error = true;
        if ($is_throw_error) {
            if (array_key_exists('code', $params)) {
                cb_throw_error($params['code'],
                    $message,
                    $cause,
                    $counter,
                    $developer);
            }
            cb_throw_error();
        }
        $response_entity = new ResponseEntity(new Record(null),
            new HttpStatus(HttpStatus::OK));

        return $response_entity;
    }
}
