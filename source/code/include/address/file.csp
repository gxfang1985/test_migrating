<?php

require_once('grn/file.csp');

class GRN_Address_FileBody extends GRN_FileBody
{
    var $_app_id = 'address';

    var $col_file
        = [
            'type' => 'weak_relation',
            'to'   => 'GRN_Address_File',
            'lazy' => true
        ];

    function __construct(& $row)
    {
        parent::__construct($row);
    }
}

class GRN_Address_FileLog extends GRN_FileLog
{
    var $_app_id = 'address';

    var $col_file
        = [
            'type' => 'relation',
            'to'   => 'GRN_Address_File',
            'lazy' => true
        ];
    var $col_body = ['type' => 'weak_relation', 'to' => 'GRN_Address_FileBody'];

    function __construct(& $row)
    {
        parent::__construct($row);
    }
}

class GRN_Address_FileLock extends GRN_FileLock
{
    var $_app_id = 'address';

    var $col_file
        = [
            'type'   => 'relation',
            'to'     => 'GRN_Address_File',
            'unique' => true
        ];

    function __construct(& $row)
    {
        parent::__construct($row);
    }
}

class GRN_Address_File extends GRN_File
{
    var $_app_id = 'address';
    var $_body_table_name = 'GRN_Address_FileBody';
    var $_log_table_name = 'GRN_Address_FileLog';
    var $_lock_table_name = 'GRN_Address_FileLock';

    function __construct(& $row)
    {
        parent::__construct($row, 'grn.address');
    }
}

class GRN_Address_FileManager_Core extends GRN_FileManager
{
    function __construct()
    {
        $this->_file_table = cb_class2table('GRN_Address_File');
        $this->_body_table = cb_class2table('GRN_Address_FileBody');
    }
}


