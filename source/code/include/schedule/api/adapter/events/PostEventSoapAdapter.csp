<?php
declare(strict_types=1);

namespace grn\schedule\api\adapter\events;

require_once('cbpapi/error_code.csp');

class PostEventSoapAdapter extends PostEventAdapterAbstract
{
    /**
     * @param \GRN_Schedule_EventBase $event
     * @param array                   $param
     *
     * @return \GRN_Schedule_EventBase
     */
    protected function setUsingPurpose(\GRN_Schedule_EventBase $event, array $param): \GRN_Schedule_EventBase
    {
        if (is_a($event, 'GRN_Schedule_NormalEvent')) {
            $event->setUsingPurpose(cb_at($param, 'facility_using_purpose'), function () {
                cb_throw_error(E_GRN_CBPAPI_MISSING_PARAMETER, null, ['param' => 'facility_using_purpose']);
            });
        }

        return $event;
    }
}
