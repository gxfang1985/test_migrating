<?php
declare(strict_types=1);

namespace grn\schedule\api\adapter\events;

require_once('schedule/error_code.csp');

class ModifyEventRestAdapter extends ModifyEventAdapterAbstract
{
    /**
     * @param \GRN_Schedule_EventBase $event
     * @param array                   $param
     *
     * @return \GRN_Schedule_EventBase
     */
    protected function setUsingPurpose(\GRN_Schedule_EventBase $event, array $param): \GRN_Schedule_EventBase
    {
        if (is_a($event, 'GRN_Schedule_NormalEvent')) {
            $event->setUsingPurpose(cb_at($param, 'facility_using_purpose'), function () {
                cb_throw_error(E_GRN_SCHD_FACILITY_USING_PURPOSE_IS_REQUIRED, null,
                    ['param' => 'facility_using_purpose']);
            });
        }

        return $event;
    }

    /**
     * @return bool
     */
    protected function isAdditionalItemsSupported(): bool
    {
        return true;
    }
}
