<?php
require_once("workflow/bean/GrnWorkflowSearchCondition.csp");

/**
 * @see GrnWorkflowSearchCondition
 */
class GrnWorkflowSearchCondition_Number extends GrnWorkflowSearchCondition
{

    /**
     * @see GrnWorkflowSearchCondition::getConditionSQL
     *
     * @param CB_DatabaseConnection $db
     *
     * @return string
     */
    public function like(CB_DatabaseConnection $db)
    {
        return "({$this->getColumnName()} LIKE BINARY '%{$db->escapeLike($this->getValue())}%')";
    }

    /**
     * @param CB_DatabaseConnection $db
     *
     * @return string|void
     */
    protected function notLike(CB_DatabaseConnection $db)
    {
        return "({$this->getColumnName()} NOT LIKE BINARY '%{$db->escapeLike($this->getValue())}%')";
    }


    /**
     * @see GrnWorkflowSearchCondition::getConditionSQL
     *
     * @param CB_DatabaseConnection $db
     *
     * @return string|void
     */
    protected function equals(CB_DatabaseConnection $db)
    {
        return "({$this->getColumnName()} = '{$db->escape($this->getValue())}')";
    }

    /**
     * @see GrnWorkflowSearchCondition::getConditionSQL
     *
     * @param CB_DatabaseConnection $db
     *
     * @return string|void
     */
    protected function notEquals(CB_DatabaseConnection $db)
    {
        return "({$this->getColumnName()} <> '{$db->escape($this->getValue())}')";
    }

    /**
     * @return int
     */
    public function getType()
    {
        return parent::GRN_WORKFLOW_SEARCH_ITEM_NUMBER;
    }

    /**
     * @return string
     */
    protected function getColumnName()
    {
        return "p.col_petition_number";
    }
}
