<?php

namespace grn\workflow\screen;

require_once("workflow/resources.csp");

/**
 *
 */
class CommandCategoryAdd
{

    /**
     * @param $t                   \GRN_Smarty
     * @param $G_INPUT             array
     * @param $page_title          String
     * @param $target_name         String
     * @param $inputLocalNameArray array
     */
    public static function commandWhenInvalidPost(
        $t,
        $G_INPUT,
        $page_title,
        $target_name,
        $inputLocalNameArray
    ) {
        self::assignCategoryID($t, $G_INPUT);
        self::assignPostParameter($t, $G_INPUT);
        self::assignPageTitle($t, $page_title, $target_name);
        self::assignMultiLanguageInfo($t, $inputLocalNameArray);
    }

    /**
     * @param $t           \GRN_Smarty
     * @param $page_title  String
     * @param $target_name String
     */
    public static function assignPageTitle($t, $page_title, $target_name)
    {
        assert(is_string($page_title));
        assert(is_string(($target_name)));
        $t->assign('page_title', $page_title);
        $t->setPageInfo($target_name);
    }

    /**
     * @param       $t \GRN_Smarty
     * @param array $G_INPUT
     */
    public static function assignPostParameter($t, array $G_INPUT)
    {
        $assign_input_values = [
            'foreign_key' => cb_at($G_INPUT, 'foreign_key'),
            'memo'        => cb_at($G_INPUT, 'memo')
        ];
        $t->assign($assign_input_values);
    }

    /**
     * @param $t \GRN_Smarty
     * @param $inputLocalNameArray
     */
    public static function assignMultiLanguageInfo(
        $t,
        array $inputLocalNameArray
    ) {
        $multiLanguageInfoArray = [];
        $multiLanguageInfoArray['element_name']
            = GRN_WORKFLOW_ELEMENT_NAME_CATEGORY;
        $multiLanguageInfoArray['values'] = $inputLocalNameArray;
        $t->assign('multiLanguageInfoArray', $multiLanguageInfoArray);
    }

    /**
     * @param $G_INPUT array
     *
     * @return string
     */

    public static function categoryId(array $G_INPUT)
    {
        return isset($G_INPUT["cid"]) ? $G_INPUT["cid"] : "";
    }

    /**
     * @param $t       \GRN_Smarty
     * @param $G_INPUT array
     */
    public static function assignCategoryID($t, array $G_INPUT)
    {
        $category_id = self::categoryId($G_INPUT);
        $t->assign('category_id', $category_id);
    }

    /**
     * @param $t             \GRN_Smarty
     * @param $site_position array
     */
    public static function assignSitePosition($t, array $site_position)
    {
        $t->assign("site_position", $site_position);
    }
}
