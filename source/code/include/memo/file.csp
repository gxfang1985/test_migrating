<?php

require_once('grn/file.csp');

class GRN_Memo_FileBody extends GRN_FileBody
{
    var $_app_id = 'memo';

    var $col_file
        = [
            'type' => 'weak_relation',
            'to'   => 'GRN_Memo_File',
            'lazy' => true
        ];

    function __construct(& $row)
    {
        parent::__construct($row);
    }
}

class GRN_Memo_FileLog extends GRN_FileLog
{
    var $_app_id = 'memo';

    var $col_file
        = [
            'type' => 'relation',
            'to'   => 'GRN_Memo_File',
            'lazy' => true
        ];
    var $col_body = ['type' => 'weak_relation', 'to' => 'GRN_Memo_FileBody'];

    function __construct(& $row)
    {
        parent::__construct($row);
    }
}

class GRN_Memo_FileLock extends GRN_FileLock
{
    var $_app_id = 'memo';

    var $col_file
        = [
            'type'   => 'relation',
            'to'     => 'GRN_Memo_File',
            'unique' => true
        ];

    function __construct(& $row)
    {
        parent::__construct($row);
    }
}

class GRN_Memo_File extends GRN_File
{
    var $_app_id = 'memo';
    var $_body_table_name = 'GRN_Memo_FileBody';
    var $_log_table_name = 'GRN_Memo_FileLog';
    var $_lock_table_name = 'GRN_Memo_FileLock';

    function __construct(& $row)
    {
        parent::__construct($row, 'grn.memo');
    }
}

class GRN_Memo_FileManager_Core extends GRN_FileManager
{
    function __construct()
    {
        $this->_file_table = cb_class2table('GRN_Memo_File');
        $this->_body_table = cb_class2table('GRN_Memo_FileBody');
    }
}


