<?php

namespace grn\mail\screen\personal\automation\command;


use grn\mail\automation\AutomaticEventFacade;

class CommandSwitchServiceStatus implements CommandAutomationResponse
{

    private $eventId;
    private $accountId;
    private $actionName;
    private $facade;

    public function __construct($actionName, $input)
    {
        $this->facade = new AutomaticEventFacade();
        $this->actionName = $actionName;
        $this->accountId = $input["accountId"];
        $this->eventId = $input["eventId"];
    }

    public function getResponse()
    {
        $userId = cb_get_login_user()->getOID();
        $accountId = $this->accountId;
        $eventId = $this->eventId;

        if ($this->actionName == CommandAutomation::DISABLE_EVENT) {
            $this->facade->disableEventByEventId($userId, $accountId, $eventId);
        } else {
            $this->facade->enableEventByEventId($userId, $accountId, $eventId);
        }

        return [
            "result" => $this->actionName === CommandAutomation::DISABLE_EVENT
                ? "disabled" : "enabled"
        ];
    }


}
