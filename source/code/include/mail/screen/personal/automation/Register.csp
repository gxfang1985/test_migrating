<?php

namespace grn\mail\screen\personal\automation;

require_once("mail/utility.csp");


class Register
{
    private $accountId;
    private $account;
    private $user;

    private $personalConfig;

    public function __construct($accountId)
    {
        $logged_in_user = cb_get_login_user();
        $this->personalConfig = \GRN_Mail_Utility::getInstance()
                                                 ->getPersonalConfig($logged_in_user);
        $this->accountId = (int)$accountId;
        $this->user = cb_get_login_user();
        $this->setAccount();
    }

    private function setAccount()
    {
        $accounts = $this->personalConfig->getAccountDataList();
        if ( ! isset($accounts[$this->accountId])) {
            cb_throw_error(E_GRN_MAIL_ACCOUNT_EMAIL_NOT_FOUND);
        }
        $this->account = $accounts[$this->accountId];
    }

    public function getAccount()
    {
        return $this->account;
    }

    public function getUseIncrementalSearch()
    {
        return \GRN_Mail_Utility::getInstance()
                                ->checkAvailableForIncrementalSearch($bookIds);
    }

}
