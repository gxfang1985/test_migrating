<?php

namespace grn\fts;

require_once('grn/application.csp');

class ChildProcessArgValue
{
    /** @var int */
    private $startId = 1;
    /** @var int */
    private $endId = 1;
    /** @var string */
    private $forward = '';
    /** @var int */
    private $userTableNum;
    /** @var FtsProduct */
    private $searchEngine;

    /**
     * @param array $input
     */
    public function parseInput(array $input)
    {
        if (isset($input['forward']) && $input['forward']) {
            $this->setForward((string)$input['forward']);
        }
        if (isset($input['startId']) && $input['startId'] > 0) {
            $this->setStartId((int)$input['startId']);
        }
        if (isset($input['endId']) && $input['endId'] > 0) {
            $this->setEndId((int)$input['endId']);
        }
        if (isset($input['userTableNum'])
            && strlen($input['userTableNum']) > 0
        ) {
            $this->setUserTableNum((string)$input['userTableNum']);
        }

        $fts_product = FtsProduct::solr();
        if (isset($input['searchEngine']) && $input['searchEngine'] == 'es') {
            $fts_product = FtsProduct::elasticsearch();
        }
        $this->setSearchEngine($fts_product);
    }

    /**
     * @return string
     */
    public function getForward()
    {
        return $this->forward;
    }

    /**
     * @param string $forward
     */
    public function setForward($forward)
    {
        $this->forward = $forward;
    }

    /**
     * @return int
     */
    public function getUserTableNum()
    {
        return $this->userTableNum;
    }

    /**
     * @param int $userTableNum
     */
    public function setUserTableNum($userTableNum)
    {
        $this->userTableNum = $userTableNum;
    }

    /**
     * @return int
     */
    public function getStartId()
    {
        return $this->startId;
    }

    /**
     * @param int $startId
     */
    public function setStartId($startId)
    {
        $this->startId = $startId;
    }

    /**
     * @return int
     */
    public function getEndId()
    {
        return $this->endId;
    }

    /**
     * @param int $endId
     */
    public function setEndId($endId)
    {
        $this->endId = $endId;
    }

    /**
     * @return FtsProduct
     */
    public function getSearchEngine()
    {
        return $this->searchEngine;
    }

    /**
     * @param FtsProduct $ftsProduct
     */
    public function setSearchEngine(FtsProduct $ftsProduct)
    {
        $this->searchEngine = $ftsProduct;
    }
}
