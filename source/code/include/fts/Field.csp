<?php

namespace grn\fts;

class Field
{
    /**
     * @var Field[]
     */
    private static $instances = [];

    /**
     * @var string
     */
    private $fieldNameForEs;

    /**
     * @var string
     */
    private $fieldNameForSolr;


    /**
     * @param string $field_name_for_solr
     * @param string $field_name_for_es
     */
    private function __construct($field_name_for_solr, $field_name_for_es)
    {
        $this->fieldNameForSolr = $field_name_for_solr;
        $this->fieldNameForEs = $field_name_for_es;
    }

    /**
     * @param string      $field_name_for_solr
     * @param string|null $field_name_for_es
     *
     * @return Field
     */
    public static function getInstance(
        $field_name_for_solr,
        $field_name_for_es = null
    ) {
        $key = "solr(${field_name_for_solr}),es(${field_name_for_es})";
        if (array_key_exists($key, self::$instances)) {
            return self::$instances[$key];
        }
        $field = new Field($field_name_for_solr,
            $field_name_for_es);
        self::$instances[$key] = $field;

        return $field;
    }

    /**
     * @return string
     */
    public function solr()
    {
        return $this->fieldNameForSolr;
    }

    /**
     * @return string
     */
    public function es()
    {
        return $this->fieldNameForEs;
    }
}
