<?php

namespace grn\fts\mail\cleanup\service;


use grn\fts\mail\cleanup\dao\DeleteTempFileDao;

class DeleteTempFileRegisterService
{
    private $dao;
    private $filePathList = [];

    /**
     * @return self
     */
    public static function getInstance()
    {
        static $_instance = null;
        if (is_null($_instance)) {
            $_instance
                = new DeleteTempFileRegisterService(new DeleteTempFileDao());
        }

        return $_instance;
    }

    /**
     * @param DeleteTempFileDao $dao
     */
    public function __construct(DeleteTempFileDao $dao)
    {
        $this->dao = $dao;
    }

    /**
     * @param string $filePath
     */
    public function addFilePath($filePath)
    {
        assert('is_string($filePath)');
        $this->filePathList[] = $filePath;
    }

    /**
     * @param array $filePathList
     */
    public function setFilePathList(array $filePathList)
    {
        $this->filePathList = $filePathList;
    }

    /**
     * @param string $queueId
     */
    public function register($queueId)
    {
        if (count($this->filePathList) > 0) {
            $this->dao->add($queueId, $this->filePathList);
        }
    }
}
