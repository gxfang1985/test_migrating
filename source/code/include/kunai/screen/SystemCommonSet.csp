<?php

namespace grn\kunai\screen;

use grn\kunai\service\KunaiService;

class SystemCommonSet extends KunaiScreenBase
{
    public function fetch()
    {
        $page_name = $this->getPageName();
        require_once('grn/smarty.csp');
        $smarty = new \GRN_Smarty();

        $kunaiService = new KunaiService();
        $smarty->assign('disable_old_version',
            $kunaiService->getEnableOldVersion());

        return $smarty->fetch($page_name . '.tpl');
    }

    public function getSitePosition()
    {
        $page_infos = ['common_set' => null];

        return $this->makeSitePosition(self::PATH_SYSTEM, $page_infos);
    }

    public function post($input)
    {
        $this->setInput($input);
        $disable_old_version = $this->getArrayValue('disable_old_version',
            $input) ? true : false;
        $kunaiService = new KunaiService();
        $kunaiService->setEnableOldVersion($disable_old_version);
    }
}
