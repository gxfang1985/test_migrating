<?php
declare(strict_types=1);

namespace grn\grn\push_notification\schedule;

class DateTimeSet
{
    /** @var \CB_DateTime */
    protected $startDatetime;

    /** @var \CB_DateTime */
    protected $endDatetime;

    /**
     * @return \CB_DateTime
     */
    public function getStartDatetime()
    {
        return $this->startDatetime;
    }

    /**
     * @param \CB_DateTime $start_datetime
     */
    public function setStartDatetime(\CB_DateTime $start_datetime)
    {
        $this->startDatetime = $start_datetime;
    }

    /**
     * @return \CB_DateTime
     */
    public function getEndDatetime()
    {
        return $this->endDatetime;
    }

    /**
     * @param \CB_DateTime $end_datetime
     */
    public function setEndDatetime(\CB_DateTime $end_datetime)
    {
        $this->endDatetime = $end_datetime;
    }

    /**
     * DateTimeSet constructor.
     *
     * @param \CB_DateTime|NULL $start_datetime
     * @param \CB_DateTime|NULL $end_datetime
     */
    public function __construct(
        \CB_DateTime $start_datetime = null,
        \CB_DateTime $end_datetime = null
    ) {
        $this->startDatetime = $start_datetime;
        $this->endDatetime = $end_datetime;
    }

    /**
     * @return bool
     */
    public function isSameDay(): bool
    {
        if (is_null($this->startDatetime)) {
            return false;
        }
        if (is_null($this->endDatetime)) {
            return false;
        }

        $start_datetime = new \CB_DateTimeEx($this->startDatetime);
        $end_datetime = new \CB_DateTimeEx($this->endDatetime);
        $start_datetime->roundByDay();
        $end_datetime->roundByDay();

        return $start_datetime->compare($end_datetime) === 0;
    }

}
