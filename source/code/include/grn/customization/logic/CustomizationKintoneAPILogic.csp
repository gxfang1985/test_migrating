<?php

namespace grn\grn\customization\logic;

use grn\grn\ErrorCode;

require_once('kintone/APILogic.csp');


class CustomizationKintoneAPILogic extends \GRN_Kintone_APILogic
{
    /**
     *
     * @return String|null
     */
    public function getRequestTokenForJsApi()
    {
        $result = $this->execute('getToken.json', false);
        if ($result['success']) {
            return $result['result']['token'];
        }

        if (isset($result['code'])) {
            $cause = [
                'error_code'    => $result['code'],
                'error_message' => $result['message']
            ];
            cb_throw_error(ErrorCode::KINTONE_API_FAIL_TO_CONNECT, null,
                $cause);
        } else {
            cb_throw_error(ErrorCode::KINTONE_NOT_AVAILABLE);
        }
    }
}
