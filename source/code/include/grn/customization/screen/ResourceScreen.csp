<?php

namespace grn\grn\customization\screen;

use grn\grn\GrnGenericScreenBase;

abstract class ResourceScreen extends GrnGenericScreenBase
{
    /**
     * @return string
     */
    public abstract function getCommandPage();

    /**
     * @return array
     */
    public abstract function getCommandParams();

    /**
     * @return string
     */
    public abstract function getRedirectPage();

    /**
     * @return array
     */
    public abstract function getRedirectParams();

    /**
     * @param \GRN_Smarty $t
     */
    public final function assignStaticPart(\GRN_Smarty $t)
    {
        $page_title = grn_get_current_page_display_name();
        $t->assign('page_title', $page_title);
        $t->assign('page_prefix', cb_is_system_page() ? 'system_' : '');

        $t->assign('site_position', $this->getSitePosition());

        $t->assign('command_page', $this->getCommandPage());
        $t->assign('command_params', $this->getCommandParams());
    }

    /**
     * @param \GRN_Smarty                       $t
     * @param \grn\grn\customization\Resource[] $js_resources
     * @param \grn\grn\customization\Resource[] $css_resources
     */
    public final function assignResources(
        \GRN_Smarty $t,
        array $js_resources,
        array $css_resources
    ) {
        $t->assign('resource_js', $js_resources);
        $t->assign('resource_css', $css_resources);
    }

    /**
     * @param \GRN_Smarty $t
     * @param int         $apply_status
     */
    public final function assignApplyStatus(\GRN_Smarty $t, $apply_status)
    {
        $t->assign('apply', $apply_status);
        $t->assign('not_apply', ! $apply_status);
    }
}
