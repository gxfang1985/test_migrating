<?php

namespace grn\grn\customization\schedule;

use grn\grn\customization\JsApiEventInterface;

class CalendarGroupWeekIndexShowJsApiEvent implements JsApiEventInterface
{
    /**
     * @var array
     */
    private $input;

    /**
     * @param array $screen_properties
     */
    public function __construct(array $screen_properties)
    {
        $this->input = $screen_properties;
    }

    /**
     * @return string
     */
    public function getEventName(): string
    {
        return "schedule.calendar.groupWeekIndex.show";
    }

    /**
     * @return array
     */
    public function getInitData(): array
    {
        $init_data = [];
        //When display the portlet screen
        if (isset($this->input["portletId"])) {
            $init_data["portletId"] = $this->input["portletId"];
        }

        return $init_data;
    }

    /**
     * @return array
     */
    public function getEventData(): array
    {
        $dates = [];
        foreach ($this->input["week"] as $week) {
            $dates[] = $week["format"];
        }
        $event_data = ["viewType" => "GROUP_WEEK", "dates" => $dates];

        return $event_data;
    }
}
