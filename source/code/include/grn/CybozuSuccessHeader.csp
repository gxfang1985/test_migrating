<?php

namespace grn\grn;

/**
 * 'X-Cybozu-Success' means that all transactions are successful.
 */
class CybozuSuccessHeader
{
    /** @var string */
    private $successHeader = 'X-Cybozu-Success: 1';

    /** @var array */
    private $pageToSend
        = [
            'batch/user_sync'
        ];

    public function send()
    {
        if ($this->needHeader() && ! headers_sent()) {
            header($this->successHeader);
        }
    }

    /**
     * @return bool
     */
    private function needHeader()
    {
        return in_array(cb_get_pagename(), $this->pageToSend);
    }
}
