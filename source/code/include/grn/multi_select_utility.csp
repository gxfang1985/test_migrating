<?php

function grn_deploy_selected_users(
    $item_name,
    $set_name,
    $input_data,
    $delim = ':'
) {
    $items = false;
    if (isset($input_data[$item_name]['0'])
        && is_array($input_data[$item_name])
    ) {
        if ('' !== trim($input_data[$item_name]['0'])) {
            $items = $input_data[$item_name]['0'];
        }
    } elseif (isset($input_data[$item_name])
              && is_string($input_data[$item_name])
    ) {
        if ('' !== trim($input_data[$item_name])) {
            $items = $input_data[$item_name];
        }
    }
    if ($items !== false) {
        $user_ids = explode($delim, $items);
        if (is_array($user_ids)) {
            $input_data[$set_name] = $user_ids;
        }
    }

    return $input_data;
}
