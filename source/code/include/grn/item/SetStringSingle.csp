<?php

namespace grn\grn\item;

class SetStringSingle
{
    /**
     * @param $view_parts   array
     * @param $user_options array (reference)
     *
     * @return array
     */
    static public function getUserSelectedOption(
        array & $view_parts,
        array & $user_options
    ) {

        $setting = "settings";
        $itemIsSelected = "initial_type";
        assert(isset($view_parts[$setting]));
        assert(isset($view_parts[$setting][$itemIsSelected]));

        if ($view_parts[$setting][$itemIsSelected] != 1) {
            $view_parts[$setting][$itemIsSelected] = 0;

            return;
        }

        assert(isset($view_parts[$setting]['initial_user_value']));
        $selected_item_signature = $view_parts[$setting]['initial_user_value'];
        if (isset($user_options[$selected_item_signature]) === false) {
            $view_parts[$setting][$itemIsSelected] = 0;

            return;
        }

        $user_options[$selected_item_signature]['selected'] = true;
    }

}
