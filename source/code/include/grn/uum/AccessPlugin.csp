<?php
declare(strict_types=1);

namespace grn\grn\uum;

class AccessPlugin
{
    public function __construct($plugin = null, array $plugin_params = [])
    {
        $this->setPlugin($plugin);
        $this->setParams($plugin_params);
    }

    /**
     * @var mixed Access plugin object
     */
    private $plugin = null;

    /**
     * @var array Access plugin params
     */
    private $params = [];

    public function setPlugin($plugin)
    {
        $this->plugin = $plugin;
    }

    public function getPlugin()
    {
        return $this->plugin;
    }

    public function setParams(array $params)
    {
        $this->params = $params;
    }

    public function getParams(): array
    {
        return $this->params;
    }

    /**
     * Check access plugin is available with target
     *
     * @param AccessPlugin|NULL $access_plugin
     * @param string            $member_type Member type
     *
     * @return bool
     */
    public static function isAvailableTarget(
        AccessPlugin $access_plugin = null,
        $member_type = null
    ): bool {
        $is_available_target = false;
        if ($access_plugin && $access_plugin->getPlugin()
            && $access_plugin->getParams()
        ) {
            $plugin_params = $access_plugin->getParams();
            $target = $plugin_params['target'] ?? [];
            $is_available_target = in_array($member_type, $target);
        }

        return $is_available_target;
    }

}
