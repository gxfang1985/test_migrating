<?php

namespace grn\grn;

class DbStatusApi
{
    public function main()
    {
        $this->prepare();

        if (cb_is_forest()) {
            $this->checkDbStatus();
        }
    }

    private function prepare()
    {
        global $G_state_set;
        $G_state_set->set('copyright_should_be_written', false);
        $G_state_set->set('html_should_be_closed', false);
        $G_state_set->set('error_page_type', 'plain');
    }

    private function checkDbStatus()
    {
        $db = cb_get_master_db();
        $db->query('DELETE FROM tab_grn_forest_alive_status');
        $db->query('INSERT INTO tab_grn_forest_alive_status (col_status) VALUES(1)');
    }
}
