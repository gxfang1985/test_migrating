<?php

namespace grn\grn;

/**
 * @see https://bozuman.cybozu.com/k/5095/show#record=212
 */
class ForestServerErrorStatus
{
    private $error_code;

    /**
     * @param $error_code
     */
    public function __construct($error_code)
    {
        $this->setErrorCode($error_code);
    }

    /**
     * @param $error_code
     */
    private function setErrorCode($error_code)
    {
        assert('is_string($error_code)');
        $this->error_code = $error_code;
    }

    /**
     * example of error code : FW00002
     *
     * @return string
     */
    private function getErrorCode()
    {
        return $this->error_code;
    }

    /**
     * @return int
     */
    public function getStatusCode()
    {
        if ($this->isInA500StatusErrorList()) {
            return 500;
        }

        return 520;
    }

    /**
     * @see https://bozuman.cybozu.com/k/5095/show#record=212
     * @return bool
     */
    public function isInA500StatusErrorList(): bool
    {
        switch ($this->getErrorCode()) {
            case "DB00000":
            case "DB01041":
            case "DB01042":
            case "DB01043":
            case "DB01129":
            case "DB02000":
            case "DB02001":
            case "DB02002":
            case "DB02003":
            case "DB02004":
            case "DB02005":
            case "DB02010":
            case "DB02011":
            case "DB02012":
            case "FW00011":
            case "FW00049":
            case "FW00053":
            case "FW00054":
            case "FW00058":
            case "FW00059":
            case "FW00021":
            case "FW00022":
            case "FW00023":
            case "GRN_FTS_00002":
                return true;
            default:
                return false;
        }
    }
}
