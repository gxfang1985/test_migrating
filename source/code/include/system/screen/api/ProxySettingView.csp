<?php

namespace grn\system\screen\api;

class ProxySettingView extends ProxySettingBase
{
    public function __construct($input)
    {
        parent::__construct($input);
        $this->viewMode = 'view';
    }

    protected function onFetch(\GRN_Smarty $smarty)
    {
        $proxy = $this->getProxySetting();
        $smarty->assign('proxy', $proxy);
        $smarty->assign('is_display_body', $this->isBodyAvailable($proxy));
        $smarty->assign('create_time',
            cb_timestamp_to_datetime($proxy->getCreateTimestamp()));
        $smarty->assign('modify_time',
            cb_timestamp_to_datetime($proxy->getModifyTimestamp()));

        $delete_info = [
            'title'   => grn_get_page_display_name('system/api/proxy_delete'),
            'page'    => 'system/api/proxy_delete.tpl',
            'data'    => ['proxy' => $proxy],
            'handler' => 'proxy_delete',
        ];

        $smarty->assign('delete_info', $delete_info);
    }
}
