<?php

namespace grn\space\utility;

use grn\space\data\bean\SpaceMemo;

/**
 * Class SpaceMemoUtility
 *
 */
class SpaceMemoUtility
{
    /**
     * @param SpaceMemo $spaceMemo
     */
    static public function constructDisplayMemo(SpaceMemo $spaceMemo)
    {
        if ($spaceMemo->isRichText()) {
            $spaceMemo->setDisplayMemo($spaceMemo->getMemo());
        } else {
            $spaceMemo->setDisplayMemo(self::grnFormatAdopter($spaceMemo->getMemo()));
        }
    }

    /**
     * @param $text
     *
     * @return string
     */
    static private function grnFormatAdopter($text)
    {
        require_once("grn/smarty.csp");
        $smarty = new \GRN_Smarty();
        require_once("plugins/function.grn_format.php");

        return smarty_function_grn_format(["body" => $text], $smarty);
    }
}
