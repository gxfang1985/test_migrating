<?php

namespace grn\space\utility;

use grn\grn\mobile\MobileDisplayUserList;

use grn\grn\access\service\AppAccess;
use grn\grn\MemberLogic;
use grn\space\common\data\bean\SpaceMember;
use grn\space\common\data\collection\SpaceMemberCollection;
use grn\space\common\logic\SpaceMemberLogic;
use grn\space\common\utility\SpaceMemberUtility;

class MobileDisplayUserListSpace extends MobileDisplayUserList
{
    static public function constructUserListForSpace(
        SpaceMemberCollection $spaceMemberCollection
    ) {
        $target_ids = [];

        /** @var SpaceMember $space_member */
        foreach ($spaceMemberCollection as $space_member) {
            $target_ids[]
                = SpaceMemberUtility::createMemberUniqueId($space_member->getMemberID(),
                $space_member->getMemberType());
        }

        $display_member_list = SpaceMemberLogic::getInstance()
                                               ->getPickoutMemberTypeIdFromParam($target_ids,
                                                   false);
        $display_member_list = SpaceMemberLogic::getInstance()
                                               ->getDisplayMemberList($display_member_list,
                                                   true);

        return $display_member_list;
    }
}
