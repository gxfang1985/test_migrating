<?php

namespace grn\space\utility;

use grn\space\data\bean\Folder;
use grn\space\data\collection\FolderCollection;
use grn\space\service\SpaceService;

/**
 * Class FolderUtility
 *
 */
class FolderUtility
{
    /**
     * @param FolderCollection $folderCollection
     *
     * @return string
     */
    static public function buildJsonFolderTreeInfo(
        FolderCollection $folderCollection
    ) {
        $result = [];
        /** @var \grn\space\data\bean\Folder $folder */
        foreach ($folderCollection as $folder) {
            $result[] = [
                "oid"      => htmlspecialchars($folder->getId()),
                "name"     => htmlspecialchars($folder->getFolderName()),
                "expanded" => 0,
                "count"    => 0,
                "children" => [],
            ];
        }

        return json_encode($result);
    }

    /**
     * @param FolderCollection $folderCollection
     *
     * @return FolderCollection
     */
    static public function addUncategorizedFolder(
        FolderCollection $folderCollection
    ) {
        $uncategorizeFolder = new Folder();
        $uncategorizeFolder->setId(SpaceService::UNCATEGORIED);
        $uncategorizeFolder->setFolderName(cb_msg('grn.space',
            'uncategorized'));

        $folderCollection->appendBean($uncategorizeFolder);

        return $folderCollection;
    }
}
