<?php

namespace grn\space\screen;

use grn\space\common\exception\GrnKintoneException;

/**
 * Class AppManageCreateApps
 *
 */
class AppManageCreateApps extends AppManageBase
{
    const PATH_TEMPLATE_FILE = "space/appmanage_create_apps.tpl";

    /**
     * @return mixed|string|void
     * @throws GrnKintoneException
     */
    public function fetch()
    {
        $spaceID = $this->getArrayValue(parent::ARG_SPACE_ID,
            $this->getInput());

        require_once('grn/smarty.csp');
        $smarty = new \GRN_Smarty();

        $smarty->assign('spid', $spaceID);
        $smarty->assign('space', $this->getSpace());
        $smarty->assign('page_title', $this->getTitle());
        $smarty->assign('site_position', $this->getSitePosition());

        return $smarty->fetch(self::PATH_TEMPLATE_FILE);
    }

    /**
     * @return array
     */
    public function getSitePosition()
    {
        $space = $this->getSpace();
        $position = parent::getSitePosition();

        $position[] = [
            "name" => grn_get_page_display_name('space/appmanage_add'),
            "page" => "space/appmanage_add",
            "spid" => $space->getId(),
        ];
        $position[] = [
            "name" => grn_get_page_display_name(cb_get_pagename()),
        ];

        return $position;
    }
}
