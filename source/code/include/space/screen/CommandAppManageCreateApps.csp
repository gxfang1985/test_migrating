<?php

namespace grn\space\screen;

use grn\space\common\exception\GrnKintoneException;
use grn\space\service\KintoneService;

/**
 * Class CommandAppManageCreateApps
 *
 */
class CommandAppManageCreateApps extends AppManageBase
{
    /**
     * @param $notUsed
     *
     * @return array
     * @throws GrnKintoneException
     */
    public function post($notUsed)
    {
        $input = $this->getInput();

        $spaceID = @$input['spid'];
        $name = @$input['appname'];
        $loginID = $this->getLoginUserId();

        $kintoneService = KintoneService::getInstance();
        $application
            = $kintoneService->createKintoneApplication($this->getSpace(),
            '', $name, '', $loginID);

        return [
            'page'   => 'space/application/external/index',
            'params' => [
                'spid'  => $spaceID,
                'appid' => $application->getId()
            ]
        ];
    }
}
