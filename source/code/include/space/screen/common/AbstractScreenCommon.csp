<?php

namespace grn\space\screen\common;

use grn\space\common\exception\GrnException;

abstract class AbstractScreenCommon
{
    /** @var \grn\space\screen\GenericScreenBase|null */
    private $childScreen = null;

    /**
     * @param \grn\space\screen\GenericScreenBase $childScreen Main screen object
     */
    public function __construct($childScreen)
    {
        $this->childScreen = $childScreen;
    }

    /**
     * Generate HTML
     */
    public function fetch()
    {
        $screen = $this->createScreen($this->getChildScreen());

        return $screen->fetch();
    }

    /**
     * Edit data in the database with the input parameter
     *
     * @param array $input
     */
    public function post($input)
    {
        return $this->getChildScreen()->post($input);
    }

    /**
     * Return the main screen
     *
     * @return \grn\space\screen\GenericScreenBase
     */
    private function getChildScreen()
    {
        return $this->childScreen;
    }

    /**
     * Wrap the main screen object and return the wrapped object.
     *
     * @param \grn\space\screen\GenericScreenBase $mainApplicationScreen
     *
     * @return SpaceListScreenDecorator|StandardScreenDecorator
     */
    abstract protected function createScreen($mainApplicationScreen);
}
