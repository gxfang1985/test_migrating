<?php

namespace grn\space\screen\common;

require_once("space/screen/common/ApplicationScreenDecorator.csp");

use grn\space\screen\common\ApplicationScreenDecorator;
use grn\space\common\exception\GrnException;

/**
 * Class ApplicationScreenCommon
 *
 */
class ApplicationScreenCommon
{
    private $childScreen = null;

    /**
     * ApplicationScreenCommon constructor.
     *
     * @param \grn\space\screen\GenericScreenBase $childScreen
     */
    public function __construct($childScreen)
    {
        $this->childScreen = $childScreen;

        $childScreen->verifySpaceIsNotExpired();
    }

    /**
     * Generate HTML
     */
    public function fetch()
    {
        $screen = $this->createApplicationScreen($this->getChildScreen());

        return $screen->fetch();
    }

    /**
     * Edit data in the database with the input parameter
     *
     * @param array $input Input from the browser.
     */
    public function post($input)
    {
        return $this->getChildScreen()->post($input);
    }

    /**
     * @return null
     */
    private function getChildScreen()
    {
        return $this->childScreen;
    }

    /**
     * @param $mainApplicationScreen
     *
     * @return ApplicationScreenDecorator
     */
    private function createApplicationScreen($mainApplicationScreen)
    {
        return new ApplicationScreenDecorator($mainApplicationScreen);
    }
}
