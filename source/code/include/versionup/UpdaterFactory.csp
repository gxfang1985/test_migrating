<?php

namespace grn\versionup;

use grn\grn\Validate;

class UpdaterFactory
{
    /**
     * @param string $version eg. 6.5.800
     *
     * @return AbstractUpdater
     */
    public static function createUpdater($version)
    {
        if ( ! Validate::isVersionNumber($version)) {
            cb_throw_error('FW00043', null, null, null,
                ['page' => cb_get_pagename()]);
        }

        $version = str_replace(".", "_", $version);

        $class_name = '\grn\versionup\v' . $version . '\Updater';

        if ( ! class_exists($class_name)) {
            cb_throw_error('FW00043', null, null, null,
                ['page' => cb_get_pagename()]);
        }

        return new $class_name();
    }
}
