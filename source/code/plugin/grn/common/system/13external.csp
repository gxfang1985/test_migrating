<?php

class plugin_grn_common_system_13external extends GRN_SystemLogicBase
{
    function __construct()
    {
        parent::__construct('external');
    }

    function getConfigArray()
    {
        require_once('grn/license.csp');
        global $G_license_mode;
        if ($G_license_mode !== GRN_LICENSE_SUCCESS) {
            return false;
        }

        $config = [
            'general' => [
                [
                    'page' => 'system/external/mail',
                    'icon' => 'mailaccount32'
                ]
            ]
        ];

        global $G_config_common;
        $display_flg = true;

        // Not display the following cases
        // CASE: garoon.com Edition
        // CASE: Cloud Partner Edition && 'SaaS->display_webproxy' setting is FALSE
        if (defined('ON_FOREST')
            || (defined('ON_SAAS')
                && ! $G_config_common->get('SaaS', 'display_webproxy'))
        ) {
            $display_flg = false;
        }

        if ($display_flg) {
            $config['general'][] = [
                'page' => 'system/external/webproxy',
                'icon' => 'proxy32'
            ];
        }

        return $config;
    }
}


