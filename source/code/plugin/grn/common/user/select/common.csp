<?php

use grn\grn\access\service\AppAccess;

class plugin_grn_common_user_select_common
{
    function evalGroups($groups, $params, $user_pulldown = false)
    {
        return $groups;
    }

    function evalUsers($users, $params)
    {
        if ( ! is_array($users) || 0 == count($users)) {
            return $users;
        }

        if ( ! array_key_exists("app_id", $params)
             || strlen($params["app_id"]) == 0
        ) {
            return $users;
        }
        $app_id = $params["app_id"];
        $users = AppAccess::filterUserIdsInternalAccessByAppId($users,
            $app_id);

        $users = array_values($users);

        return $users;
    }
}


