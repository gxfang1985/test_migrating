<?php

require_once('fw/backupmode.csp');

class plugin_fw_backupmode_garoon extends CB_BackupModeBaseDriver
{
    /**
     * @param array $info
     */
    function onHttpRequest($info)
    {
        require_once("grn/smarty.csp");
        $t = new GRN_Smarty;
        if ( ! is_null($info['start'])) {
            $t->assign('start', $info['start']);
        }
        if ( ! is_null($info['end'])) {
            $t->assign('end', $info['end']);
        }
        $t->display('grn/backupmode.tpl');
        exit(3);
    }

    /**
     * @param array $info
     */
    function onCommandLineRequest($info)
    {
        echo "Now in the backupmode...\n";
        $start = '-';
        if ( ! is_null($info['start'])) {
            $start = $info['start']->format();
        }
        echo "START:$start\n";
        $end = '-';
        if ( ! is_null($info['end'])) {
            $end = $info['end']->format();
        }
        echo "END:$end\n";
        exit(3);
    }

    function beforeBackupModeStart()
    {
        ;
    }

    function afterBackupModeStart()
    {
        ;
    }

    function beforeBackupModeEnd()
    {
        ;
    }

    function afterBackupModeEnd()
    {
        ;
    }
}


