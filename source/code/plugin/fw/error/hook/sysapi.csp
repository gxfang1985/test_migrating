<?php

require_once('util_api/logic.csp');

/**
 * @param array $error_info
 */
function plugin_fw_error_hook_sysapi($error_info)
{
    if (grn_util_api_get_debug_file_name()) {
        ob_start();
        print_r($error_info);
        $log_message = ob_get_contents();
        ob_end_clean();

        $log_message = "ERROR\n" . html_entity_decode($log_message, ENT_QUOTES);
        grn_util_api_debug($log_message);
    }

    // clean up upload temp files
    global $G_state_set;
    if ($G_state_set->get('sysapi.upload_tmp_files')) {
        require_once('util_api/util.csp');
        util_api_cleanup_upload_temp_file();
    }
}


