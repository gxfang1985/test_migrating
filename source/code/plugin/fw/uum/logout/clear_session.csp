<?php

/**
 * セッションキャッシュをクリアする
 */
function plugin_fw_uum_logout_clear_session($user)
{
    /**
     * timecard
     * タイムカードは自動打刻を行ったかどうかセッションにタイムスタンプを残している
     * ログアウト後、再ログイン時に自動打刻を有効にするためにセッションの値をクリアする
     *
     * @see plugin/fw/prepend/20timecard.csp
     */
    $modules = [
        'grn.common.ui',
        'grn.common.calendar',
        'grn.common.org_tree_util',
        'timecard'
    ];

    require_once('fw/session_manager.csp');
    $sm = CB_SessionManager::getInstance();
    foreach ($modules as $module) {
        $sm->destroy($module);
    }
}
