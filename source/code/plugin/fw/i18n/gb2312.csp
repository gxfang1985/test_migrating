<?php
/**
 * GB2312 <-> UTF-8 converter
 *
 * GRN2-7911 http://issues.dev.cybozu.co.jp/browse/GRN2-7911
 * GRN2-7957 http://issues.dev.cybozu.co.jp/browse/GRN2-7957
 * GRN2-7959 http://issues.dev.cybozu.co.jp/browse/GRN2-7959
 */

require_once('fw/i18n.csp');

define('PLUGIN_FW_I18N_GB2312_INTERNAL_ENCODING', 'CP936');

class plugin_fw_i18n_gb2312 extends CB_I18N_EncoderBase
{
    function __construct()
    {
        parent::__construct(PLUGIN_FW_I18N_GB2312_INTERNAL_ENCODING);
    }

    /**
     * @see CB_I18N_EncoderBase::getCharset()
     */
    function getCharset()
    {
        return parent::getCharset();
    }

    /**
     * @see CB_I18N_EncoderBase::convFromUTF8()
     */
    function convFromUTF8($value)
    {
        return mb_convert_encoding($value, $this->getCharset(), "UTF-8");
    }

    /**
     * @see CB_I18N_EncoderBase::convToUTF8()
     */
    function convToUTF8($value)
    {
        return mb_convert_encoding($value, "UTF-8", $this->getCharset());
    }
}
