[[PHPでの構文|section:php_syntax]]
[[src]]
<?php

class parent
{
    var $_prop1 = "parent property";
    function foo()
    {
        echo "parent::foo() called";
    }
}

class child extends parent
{
    var $_prop2 = "child property";
    function foo()
    {
        echo "child::foo() called";
    }
}

$oc = new child;
echo get_class($oc);                 {{//「child」}}
echo get_parent_class($oc);          {{//「parent」}}
$oc->foo();                          {{//「child::foo() called」}}

$op = new parent;
echo get_class($op);                 {{//「parent」}}
echo get_parent_class($op);          {{//「なにも表示されない」}}
$op->foo();                          {{//「parent::foo() called」}}

?>
[[/src]]

[[拡張モジュールの記述方法|section:ext_syntax]]
[[src]]
''コール側の記述列(hoge.csp)''
<?php

    $obj = new hoge2;

    echo get_class($obj);            {{//「hoge2」</span>
    echo get_parent_class($obj);     {{//「hoge」</span>
    $obj->foo();                     {{//「hoge2::foo() called」</span>

?>
[[/src]]

[[src]]
''モジュール側の記述例(hoge.c)''

zend_class_entry *g_ce_hoge;

function_entry hoge_class_functions[] = 
{
    PHP_CLASS_FE(hoge, foo, NULL)
    {NULL, NULL, NULL}
};

function_entry hoge2_class_functions[] = 
{
    PHP_CLASS_FE(hoge2, foo, NULL)
    {NULL, NULL, NULL}
};

int class_init(TSRMLS_D)
{
    zend_class_entry ce;

    INIT_CLASS_ENTRY(ce, 
                     "hoge", 
                     hoge_class_functions);

    g_ce_hoge = zend_register_internal_class(&ce TSRMLS_CC);

    INIT_CLASS_ENTRY(ce, 
                     "hoge2", 
                      hoge2_class_functions);

    zend_register_internal_class_ex(&ce, g_ce_hoge, "hoge" TSRMLS_CC);

    return SUCCESS;
};

PHP_MINIT_FUNCTION(hoge)
{
    ...
    class_init(TSRMLS_C);
    ...

    return SUCCESS;
};

PHP_CLASS_FUNCTION(hoge2, foo)
{
    zend_printf("hoge2::foo() called");
};

PHP_CLASS_FUNCTION(hoge, static_foo)
{
    zend_printf("hoge::foo() called");
};
[[/src]]

[[継承用 API|section:api]]

[[クラス定義|doc:pg/php/extension/manual/class/class]] と一緒に記述しますので、そちらを参照してください。

[[より詳しく知りたい方へ|section:tips]]
[[src]]
''(zend_API.c)''

ZEND_API zend_class_entry *zend_register_internal_class_ex(zend_class_entry *class_entry, zend_class_entry *parent_ce, char *parent_name TSRMLS_DC)
{
    zend_class_entry *register_class;

    if (!parent_ce && parent_name) {
        {{// クラステーブルから親クラスのデータを取得}}
        if (zend_hash_find(CG(class_table), parent_name, strlen(parent_name)+1, (void **) &parent_ce)==FAILURE) {
            return NULL;
        }
    }

    {{// zendエンジンにクラスを登録する}}
    register_class = zend_register_internal_class(class_entry TSRMLS_CC);

    {{// 親クラスが存在する場合}}
    if (parent_ce) {
        {{// 継承設定}}
        zend_do_inheritance(register_class, parent_ce);
    }
    return register_class;
}
[[/src]]