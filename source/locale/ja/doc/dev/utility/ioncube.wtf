[[概要|section:abstract]]

PHPはスクリプト言語ですので、そのままの状態では誰でも読むことが出来てしまうため、製品出荷時にソースコードを暗号化して出荷する必要があります。ここで出番となるのが、[[ionCube Encoder|http://www.ioncube.com/]] です。

ionCube Encoderを使用すると、エンコード(コード隠蔽の為)だけでなくコンパイルが同時に行われるため、高速化の恩恵も得ることが出来ます。実行時には、ionCube loaderによってソースコードのデコードが行われ、実行されます。
 (PHPはスクリプト言語ですが、単純なインタプリタ言語ではありません。PHPスクリプトの実行時は、常に「ランタイムコンパイラ」が自動的にスクリプトをコンパイルし、これを「エグゼキュータ」が実行します。ionCube Encoderではエグゼキューターが理解できる形のものをエンコードします。)

[[使用手順|section:use]]

エンコード対象はロジック部分のスクリプトのみであり、ロケールリソースはカスタマイズ用途があり得るため対象外とします。具体的には [[デプロイメント仕様|doc:ext/deployment]] にある、CGI ディレクトリの ''"code"'' ディレクトリ以下のスクリプトのみエンコードします。

下記の例は、ionCube エンコーダーのバージョン 3.1 でのものです。バージョンが異なる場合、オプションを変更しないといけない場合があるので注意してください。

[[src]]
cd /.../azalea_unix
((# 実際にはエンコードしたい元ソースがあるところ))

/.../ioncube_encoder -o **encoded_code** --include '*.csp' --erase-target \
 --binary --allow-untrusted-extensions --optimize max --without-loader-check **code**
((# \ の個所は本当は改行しない))
((# code ディレクトリ以下のスクリプトを encoded_code ディレクトリにエンコードして保存))
[[/src]]

製品がリソースのカスタマイズを許可しない方針であれば、国際化リソースの収められている ''"locale"'' ディレクトリもエンコード可能です。 

[[リファレンス|section:reference]]

*[[ionCube Encoder／Loader|http://www.ioncube.com/]]
*[[ionCube Japan|http://www.ioncube.jp/]]
 ionCube Japan のマニュアル類は、英語版からデグレードしています。例えば "--binary" オプションの記述などが抜けてしまっているので、正確を期す場合英語版を参照してください。
