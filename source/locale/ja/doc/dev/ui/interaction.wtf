[[概要|section:abstract]]

*[[概要（パワーポイント資料）|cb6:page=FileView&gid=3561&fCID=86244&fFID=102666]]

[[要件|section:requirement]]

*UIをHTMLで記述する上で、align や border などのタグのオプションが一貫した状態となる 
*ブラウザ毎に異なる記述を吸収する 
*日付時刻の入力・表示等の国際化対応
 （言語設定を変更するだけで、Smartyテンプレートの記述を変更せずとも、UIが切り替わる） 
*ブラウザ側の入力チェック・入力値送信とCGI側の入力値受信・データ型の正規化を連動させる

[[位置づけ|section:layer]]

MVCモデルにおいて

[[Model|head:]]

*ビジネスロジック(by PHP) 
*永続化レイヤ(by PHP) 
*データベース(by MySQP Pro) 

[[View（Webデザイン）|head:]]

*ナビゲーション(by PHP, Smarty) 
*レイアウト(by Smarty) 
* **''インタラクション（フォーム）''**(by Smarty, JavaScript) 
*スタイル(by CSS, HTML) 

[[Control|head:]]

*ModelとView、およびViewとViewをつなぐ(by PHP) 

[[提供形態|section:distribution]]

*Smartyプラグイン関数 
*Smartyテンプレートのインクルードファイル 
*JavaScript関数 
*及び、上記の組み合わせ

[[API|section:api]]

[[スタティック|head:]]
*[[ui:cb_ui_image]]
*[[ui:cb_ui_image_onclick]]
*[[ui:cb_ui_page_title]]
*[[ui:cb_ui_subject]]
*[[ui:cb_ui_user]]
*[[ui:cb_ui_timestamp]]
*[[ui:cb_ui_data_title]]
*[[ui:cb_ui_delete_title]]
*[[ui:cb_ui_filename]]

[[メニュー|head:]]
*[[ui:cb_ui_url]]
*[[ui:cb_ui_pageurl]]
*[[ui:cb_ui_pulldown_begin]]
*[[ui:cb_ui_pulldown_end]]
*[[ui:cb_ui_pulldown_url]]
*[[ui:cb_ui_pulldown_pageurl]]
*[[ui:cb_ui_pulldown_group]]
*[[ui:cb_ui_pulldown_sep]]

[[フォーム（INPUT系）|head:]]
*[[ui:cb_ui_text]]
*[[ui:cb_ui_text_url]]
*[[ui:cb_ui_password]]
*[[ui:cb_ui_checkbox]]
*[[ui:cb_ui_radio]]
*[[ui:cb_ui_file]]
*[[ui:cb_ui_yes_no]]
*[[ui:cb_ui_cancel]]

[[フォーム（SELECT系）|head:]]
*[[ui:cb_ui_select_user]]
*[[ui:cb_ui_options_user]]
*[[ui:cb_ui_select_group]]
*[[ui:cb_ui_options_group]]
*''[[cb_ui_order.tpl|#cb_ui_order]]''
*''[[cb_ui_add_remove.tpl|#cb_ui_add_remove]]''
*''[[cb_ui_filebox.tpl|#cb_ui_filebox]]''
*[[ui:cb_ui_select_date]]
*[[ui:cb_ui_select_time]]
*[[ui:cb_ui_select_locale]]
*[[ui:cb_ui_select_encoding]]
*[[ui:cb_ui_select_time_notation]]

[[フォーム（その他）|head:]]
*[[ui:cb_ui_textarea]]
*[[ui:cb_ui_fieldset_begin]]
*[[ui:cb_ui_fieldset_end]]

[[cb_ui_order.tpl|head:cb_ui_order]]

順番変更リストボックス

* string ''order_form_name'': フォーム名
* string ''order_name'': SELECTタグのNAME属性
* array ''order_options'': リストボックスに含まれる要素（連想配列）
* boolean ''order_show_button'' (option): 「変更する」ボタンを表示するか
* string ''order_modify_name'' (option): 「変更する」ボタン（INPUTタグ）のNAME属性

order_show_button=true とした場合、order_modify_name を指定する必要がある

cb_ui_order.tpl 内では、JavaScript ファイル cb_ui.js, cb_ui_select.js, cb_ui_order.js がインクルードされる。
ただし、２回目以降に関しては同一の JavaScript ファイルをインクルードしないように、 制御がなされている。

cb_ui_order.tpl を含むフォームでは、
FORMタグのonsubmitオプションで onsubmit="cb_ui_onsubmit_common(this)" を指定する必要がある。
これは、submit直前にSELECT内の全要素を選択済みにしておく必要があるためである。
cb_ui_onsubmit_common()関数は cb_ui.js 内で定義されている。

記述例
[[src]]
{include file="cb_ui_order.tpl" order_form_name="user_order" 
 order_name="uid" order_options=$users order_show_button=TRUE 
 order_modify_name="modify"}
[[/src]]


[[cb_ui_add_remove.tpl|head:cb_ui_add_remove]]

追加・削除リストボックス

* string    ''add_remove_form_name'':   フォーム名
* string    ''add_remove_l_caption'':   左側のキャプション
* string    ''add_remove_r_caption'':   右側のキャプション
* string    ''add_remove_l_name'':      左側のリストボックス（SELECTタグ）のNAME属性
* string    ''add_remove_r_name'':      右側のリストボックス（SELECTタグ）のNAME属性
* array     ''add_remove_l_options'':   左側のリストボックスに含まれる要素（連想配列）
* array     ''add_remove_r_options'':   右側のリストボックスに含まれる要素（連想配列）
* boolean   ''add_remove_exclusive'' (option):  左右の要素をかぶらないようにするか

デフォルトでは右側から左側に要素を追加しても、右側から要素は消えません。 
add_remove_exclusive=true を指定すると、右側から要素は消えます。 

cb_ui_add_remove.tpl 内では、JavaScript ファイル cb_ui.js, cb_ui_select.js, cb_ui_add_remove.js がインクルードされる。
ただし、２回目以降に関しては同一の JavaScript ファイルをインクルードしないように、 制御がなされている。 

cb_ui_add_remove.tpl を含むフォームでは、
FORMタグのonsubmitオプションで onsubmit="cb_ui_onsubmit_common(this)" を指定する必要がある。 
これは、submit直前にSELECT内の全要素を選択済みにしておく必要があるためである。 
cb_ui_onsubmit_common()関数は cb_ui.js 内で定義されている。 

記述例
[[src]]
{include file="cb_ui_add_remove.tpl" add_remove_form_name="user_add"
 add_remvoe_l_caption="所属するグループ" 
 add_remove_r_caption="所属しないグループ"
 add_remove_l_name="aid" add_remove_r_name="rid"
 add_remove_l_options=$user_groups add_remove_r_options=$groups
 add_remove_exclusive=true}
[[/src]]


[[cb_ui_filebox.tpl|head:cb_ui_filebox]]

複数ファイル選択

* string    ''filebox_form_name'':  フォーム名
* string    ''fielbox_name'':   SELECTタグのNAME属性

ファイルのIDの配列を受け取って添付ファイル処理をするわけだが、 
このファイルIDから添付されたファイルの情報を cb_get_session_file() を使って取得できる 
（参照：[[ファイルアップロード・ダウンロード-セッションへの一時的な保存|doc:pg/misc/file#session]]）。 

cb_ui_filebox.tpl 内では、
JavaScript ファイル cb_ui.js, cb_ui_select.js, cb_ui_filebox.js がインクルードされる。
ただし、２回目以降に関しては同一の JavaScript ファイルをインクルードしないように、 
制御がなされている。 

cb_ui_filebox.tpl を含むフォームでは、
FORMタグのonsubmitオプションで onsubmit="cb_ui_onsubmit_common(this)" を指定する必要がある。 
これは、submit直前にSELECT内の全要素を選択済みにしておく必要があるためである。 
cb_ui_onsubmit_common()関数は cb_ui.js 内で定義されている。

記述例
[[src]]
{include file="cb_ui_filebox.tpl" filebox_form_name="send" 
 filebox_name="files"}
[[/src]]

[[リファレンス|section:reference]]

''サンプル''
*ソース ([[developer/command_ui_interaction_demo.csp]],[[実行|run:developer/ui_interaction_demo]])
*Smartyテンプレート（[[page/developer/ui_interaction_demo.tpl]]）

''フレームワークソース''
*[[fw/ui.csp|include/fw/ui.csp]]
*[[fw/smarty_plugin.csp|include/fw/smarty_plugin.csp]]
